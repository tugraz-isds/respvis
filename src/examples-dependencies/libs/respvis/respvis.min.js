// RespVis version 2.0 ESM
var t,e=new Uint8Array(16);function n(){if(!t&&!(t="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return t(e)}var r=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;for(var i=[],a=0;a<256;++a)i.push((a+256).toString(16).substr(1));function o(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=(i[t[e+0]]+i[t[e+1]]+i[t[e+2]]+i[t[e+3]]+"-"+i[t[e+4]]+i[t[e+5]]+"-"+i[t[e+6]]+i[t[e+7]]+"-"+i[t[e+8]]+i[t[e+9]]+"-"+i[t[e+10]]+i[t[e+11]]+i[t[e+12]]+i[t[e+13]]+i[t[e+14]]+i[t[e+15]]).toLowerCase();if(!function(t){return"string"==typeof t&&r.test(t)}(n))throw TypeError("Stringified UUID is invalid");return n}function l(t,e,r){var i=(t=t||{}).random||(t.rng||n)();if(i[6]=15&i[6]|64,i[8]=63&i[8]|128,e){r=r||0;for(var a=0;a<16;++a)e[r+a]=i[a];return e}return o(i)}function u(t,e){void 0===e&&(e=0);var n=Math.pow(10,e);return{width:Math.round(t.width*n)/n,height:Math.round(t.height*n)/n}}function c(t,e,n){return void 0===n&&(n=.001),Math.abs(t.width-e.width)<n&&Math.abs(t.height-e.height)<n}function s(t,e){return void 0===e&&(e=1),t=u(t,e),"".concat(t.width,", ").concat(t.height)}function h(t){var e=t.split(",").map((function(t){return parseFloat(t.trim())}));return{width:e[0],height:e[1]}}function f(t,e){e=u(e),t.attr("width",e.width),t.attr("height",e.height)}function d(t){var e=t.selection();return{width:parseFloat(e.attr("width")||"0"),height:parseFloat(e.attr("height")||"0")}}function p(t,e){void 0===e&&(e=0);var n=Math.pow(10,e);return{x:Math.round(t.x*n)/n,y:Math.round(t.y*n)/n}}function g(t,e,n){return void 0===n&&(n=.001),Math.abs(t.x-e.x)<n&&Math.abs(t.y-e.y)<n}function y(t,e){return void 0===e&&(e=1),t=p(t,e),"".concat(t.x,", ").concat(t.y)}function v(t){var e=t.split(",").map((function(t){return parseFloat(t.trim())}));return{x:e[0],y:e[1]}}function m(t,e){e=p(e),t.attr("x",e.x),t.attr("y",e.y)}function b(t){var e=t.selection();return{x:parseFloat(e.attr("x")||"0"),y:parseFloat(e.attr("y")||"0")}}function w(t,e){t.attr("transform","translate(".concat(y(p(e)),")"))}function x(t,e){if(t===e)return!0;if(null==t||null==e)return!1;if(t.length!==e.length)return!1;for(var n=0;n<t.length;++n){if(t[n]instanceof Array&&!x(t[n],e[n]))return!1;if(t[n]!==e[n])return!1}return!0}function k(t){return Array.isArray(t)}function _(t){return k(t)&&t.every((function(t){return Array.isArray(t)}))}function A(t,e){for(var n=[],r=0;r<t.length;r+=e)n.push(t.slice(r,r+e));return n}function M(t,e){return null==t||null==e?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function S(t,e){return null==t||null==e?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function C(t){let e,n,r;function i(t,r,i=0,a=t.length){if(i<a){if(0!==e(r,r))return a;do{const e=i+a>>>1;n(t[e],r)<0?i=e+1:a=e}while(i<a)}return i}return 2!==t.length?(e=M,n=(e,n)=>M(t(e),n),r=(e,n)=>t(e)-n):(e=t===M||t===S?t:E,n=t,r=t),{left:i,center:function(t,e,n=0,a=t.length){const o=i(t,e,n,a-1);return o>n&&r(t[o-1],e)>-r(t[o],e)?o-1:o},right:function(t,r,i=0,a=t.length){if(i<a){if(0!==e(r,r))return a;do{const e=i+a>>>1;n(t[e],r)<=0?i=e+1:a=e}while(i<a)}return i}}}function E(){return 0}const z=C(M).right;C((function(t){return null===t?NaN:+t})).center;var j=z;class N extends Map{constructor(t,e=$){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:e}}),null!=t)for(const[e,n]of t)this.set(e,n)}get(t){return super.get(V(this,t))}has(t){return super.has(V(this,t))}set(t,e){return super.set(function({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):(t.set(r,n),n)}(this,t),e)}delete(t){return super.delete(function({_intern:t,_key:e},n){const r=e(n);t.has(r)&&(n=t.get(r),t.delete(r));return n}(this,t))}}function V({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):n}function $(t){return null!==t&&"object"==typeof t?t.valueOf():t}const L=Math.sqrt(50),T=Math.sqrt(10),P=Math.sqrt(2);function R(t,e,n){const r=(e-t)/Math.max(0,n),i=Math.floor(Math.log10(r)),a=r/Math.pow(10,i),o=a>=L?10:a>=T?5:a>=P?2:1;let l,u,c;return i<0?(c=Math.pow(10,-i)/o,l=Math.round(t*c),u=Math.round(e*c),l/c<t&&++l,u/c>e&&--u,c=-c):(c=Math.pow(10,i)*o,l=Math.round(t/c),u=Math.round(e/c),l*c<t&&++l,u*c>e&&--u),u<l&&.5<=n&&n<2?R(t,e,2*n):[l,u,c]}function O(t,e,n){return R(t=+t,e=+e,n=+n)[2]}function F(t,e,n){t=+t,e=+e,n=(i=arguments.length)<2?(e=t,t=0,1):i<3?1:+n;for(var r=-1,i=0|Math.max(0,Math.ceil((e-t)/n)),a=new Array(i);++r<i;)a[r]=t+r*n;return a}function B(t){return t}var D=1,q=2,W=3,X=4,I=1e-6;function H(t){return"translate("+t+",0)"}function Y(t){return"translate(0,"+t+")"}function U(t){return e=>+t(e)}function G(t,e){return e=Math.max(0,t.bandwidth()-2*e)/2,t.round()&&(e=Math.round(e)),n=>+t(n)+e}function K(){return!this.__axis}function Z(t,e){var n=[],r=null,i=null,a=6,o=6,l=3,u="undefined"!=typeof window&&window.devicePixelRatio>1?0:.5,c=t===D||t===X?-1:1,s=t===X||t===q?"x":"y",h=t===D||t===W?H:Y;function f(f){var d=null==r?e.ticks?e.ticks.apply(e,n):e.domain():r,p=null==i?e.tickFormat?e.tickFormat.apply(e,n):B:i,g=Math.max(a,0)+l,y=e.range(),v=+y[0]+u,m=+y[y.length-1]+u,b=(e.bandwidth?G:U)(e.copy(),u),w=f.selection?f.selection():f,x=w.selectAll(".domain").data([null]),k=w.selectAll(".tick").data(d,e).order(),_=k.exit(),A=k.enter().append("g").attr("class","tick"),M=k.select("line"),S=k.select("text");x=x.merge(x.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),k=k.merge(A),M=M.merge(A.append("line").attr("stroke","currentColor").attr(s+"2",c*a)),S=S.merge(A.append("text").attr("fill","currentColor").attr(s,c*g).attr("dy",t===D?"0em":t===W?"0.71em":"0.32em")),f!==w&&(x=x.transition(f),k=k.transition(f),M=M.transition(f),S=S.transition(f),_=_.transition(f).attr("opacity",I).attr("transform",(function(t){return isFinite(t=b(t))?h(t+u):this.getAttribute("transform")})),A.attr("opacity",I).attr("transform",(function(t){var e=this.parentNode.__axis;return h((e&&isFinite(e=e(t))?e:b(t))+u)}))),_.remove(),x.attr("d",t===X||t===q?o?"M"+c*o+","+v+"H"+u+"V"+m+"H"+c*o:"M"+u+","+v+"V"+m:o?"M"+v+","+c*o+"V"+u+"H"+m+"V"+c*o:"M"+v+","+u+"H"+m),k.attr("opacity",1).attr("transform",(function(t){return h(b(t)+u)})),M.attr(s+"2",c*a),S.attr(s,c*g).text(p),w.filter(K).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",t===q?"start":t===X?"end":"middle"),w.each((function(){this.__axis=b}))}return f.scale=function(t){return arguments.length?(e=t,f):e},f.ticks=function(){return n=Array.from(arguments),f},f.tickArguments=function(t){return arguments.length?(n=null==t?[]:Array.from(t),f):n.slice()},f.tickValues=function(t){return arguments.length?(r=null==t?null:Array.from(t),f):r&&r.slice()},f.tickFormat=function(t){return arguments.length?(i=t,f):i},f.tickSize=function(t){return arguments.length?(a=o=+t,f):a},f.tickSizeInner=function(t){return arguments.length?(a=+t,f):a},f.tickSizeOuter=function(t){return arguments.length?(o=+t,f):o},f.tickPadding=function(t){return arguments.length?(l=+t,f):l},f.offset=function(t){return arguments.length?(u=+t,f):u},f}function Q(t){return Z(W,t)}function J(t){return Z(X,t)}var tt={value:()=>{}};function et(){for(var t,e=0,n=arguments.length,r={};e<n;++e){if(!(t=arguments[e]+"")||t in r||/[\s.]/.test(t))throw new Error("illegal type: "+t);r[t]=[]}return new nt(r)}function nt(t){this._=t}function rt(t,e){for(var n,r=0,i=t.length;r<i;++r)if((n=t[r]).name===e)return n.value}function it(t,e,n){for(var r=0,i=t.length;r<i;++r)if(t[r].name===e){t[r]=tt,t=t.slice(0,r).concat(t.slice(r+1));break}return null!=n&&t.push({name:e,value:n}),t}nt.prototype=et.prototype={constructor:nt,on:function(t,e){var n,r,i=this._,a=(r=i,(t+"").trim().split(/^|\s+/).map((function(t){var e="",n=t.indexOf(".");if(n>=0&&(e=t.slice(n+1),t=t.slice(0,n)),t&&!r.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:e}}))),o=-1,l=a.length;if(!(arguments.length<2)){if(null!=e&&"function"!=typeof e)throw new Error("invalid callback: "+e);for(;++o<l;)if(n=(t=a[o]).type)i[n]=it(i[n],t.name,e);else if(null==e)for(n in i)i[n]=it(i[n],t.name,null);return this}for(;++o<l;)if((n=(t=a[o]).type)&&(n=rt(i[n],t.name)))return n},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new nt(t)},call:function(t,e){if((n=arguments.length-2)>0)for(var n,r,i=new Array(n),a=0;a<n;++a)i[a]=arguments[a+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(a=0,n=(r=this._[t]).length;a<n;++a)r[a].value.apply(e,i)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],i=0,a=r.length;i<a;++i)r[i].value.apply(e,n)}};var at="http://www.w3.org/1999/xhtml",ot={svg:"http://www.w3.org/2000/svg",xhtml:at,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function lt(t){var e=t+="",n=e.indexOf(":");return n>=0&&"xmlns"!==(e=t.slice(0,n))&&(t=t.slice(n+1)),ot.hasOwnProperty(e)?{space:ot[e],local:t}:t}function ut(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===at&&e.documentElement.namespaceURI===at?e.createElement(t):e.createElementNS(n,t)}}function ct(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function st(t){var e=lt(t);return(e.local?ct:ut)(e)}function ht(){}function ft(t){return null==t?ht:function(){return this.querySelector(t)}}function dt(){return[]}function pt(t){return null==t?dt:function(){return this.querySelectorAll(t)}}function gt(t){return function(){return null==(e=t.apply(this,arguments))?[]:Array.isArray(e)?e:Array.from(e);var e}}function yt(t){return function(){return this.matches(t)}}function vt(t){return function(e){return e.matches(t)}}var mt=Array.prototype.find;function bt(){return this.firstElementChild}var wt=Array.prototype.filter;function xt(){return Array.from(this.children)}function kt(t){return new Array(t.length)}function _t(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}function At(t,e,n,r,i,a){for(var o,l=0,u=e.length,c=a.length;l<c;++l)(o=e[l])?(o.__data__=a[l],r[l]=o):n[l]=new _t(t,a[l]);for(;l<u;++l)(o=e[l])&&(i[l]=o)}function Mt(t,e,n,r,i,a,o){var l,u,c,s=new Map,h=e.length,f=a.length,d=new Array(h);for(l=0;l<h;++l)(u=e[l])&&(d[l]=c=o.call(u,u.__data__,l,e)+"",s.has(c)?i[l]=u:s.set(c,u));for(l=0;l<f;++l)c=o.call(t,a[l],l,a)+"",(u=s.get(c))?(r[l]=u,u.__data__=a[l],s.delete(c)):n[l]=new _t(t,a[l]);for(l=0;l<h;++l)(u=e[l])&&s.get(d[l])===u&&(i[l]=u)}function St(t){return t.__data__}function Ct(t){return"object"==typeof t&&"length"in t?t:Array.from(t)}function Et(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function zt(t){return function(){this.removeAttribute(t)}}function jt(t){return function(){this.removeAttributeNS(t.space,t.local)}}function Nt(t,e){return function(){this.setAttribute(t,e)}}function Vt(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function $t(t,e){return function(){var n=e.apply(this,arguments);null==n?this.removeAttribute(t):this.setAttribute(t,n)}}function Lt(t,e){return function(){var n=e.apply(this,arguments);null==n?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}function Tt(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function Pt(t){return function(){this.style.removeProperty(t)}}function Rt(t,e,n){return function(){this.style.setProperty(t,e,n)}}function Ot(t,e,n){return function(){var r=e.apply(this,arguments);null==r?this.style.removeProperty(t):this.style.setProperty(t,r,n)}}function Ft(t,e){return t.style.getPropertyValue(e)||Tt(t).getComputedStyle(t,null).getPropertyValue(e)}function Bt(t){return function(){delete this[t]}}function Dt(t,e){return function(){this[t]=e}}function qt(t,e){return function(){var n=e.apply(this,arguments);null==n?delete this[t]:this[t]=n}}function Wt(t){return t.trim().split(/^|\s+/)}function Xt(t){return t.classList||new It(t)}function It(t){this._node=t,this._names=Wt(t.getAttribute("class")||"")}function Ht(t,e){for(var n=Xt(t),r=-1,i=e.length;++r<i;)n.add(e[r])}function Yt(t,e){for(var n=Xt(t),r=-1,i=e.length;++r<i;)n.remove(e[r])}function Ut(t){return function(){Ht(this,t)}}function Gt(t){return function(){Yt(this,t)}}function Kt(t,e){return function(){(e.apply(this,arguments)?Ht:Yt)(this,t)}}function Zt(){this.textContent=""}function Qt(t){return function(){this.textContent=t}}function Jt(t){return function(){var e=t.apply(this,arguments);this.textContent=null==e?"":e}}function te(){this.innerHTML=""}function ee(t){return function(){this.innerHTML=t}}function ne(t){return function(){var e=t.apply(this,arguments);this.innerHTML=null==e?"":e}}function re(){this.nextSibling&&this.parentNode.appendChild(this)}function ie(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function ae(){return null}function oe(){var t=this.parentNode;t&&t.removeChild(this)}function le(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function ue(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function ce(t){return function(){var e=this.__on;if(e){for(var n,r=0,i=-1,a=e.length;r<a;++r)n=e[r],t.type&&n.type!==t.type||n.name!==t.name?e[++i]=n:this.removeEventListener(n.type,n.listener,n.options);++i?e.length=i:delete this.__on}}}function se(t,e,n){return function(){var r,i=this.__on,a=function(t){return function(e){t.call(this,e,this.__data__)}}(e);if(i)for(var o=0,l=i.length;o<l;++o)if((r=i[o]).type===t.type&&r.name===t.name)return this.removeEventListener(r.type,r.listener,r.options),this.addEventListener(r.type,r.listener=a,r.options=n),void(r.value=e);this.addEventListener(t.type,a,n),r={type:t.type,name:t.name,value:e,listener:a,options:n},i?i.push(r):this.__on=[r]}}function he(t,e,n){var r=Tt(t),i=r.CustomEvent;"function"==typeof i?i=new i(e,n):(i=r.document.createEvent("Event"),n?(i.initEvent(e,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(e,!1,!1)),t.dispatchEvent(i)}function fe(t,e){return function(){return he(this,t,e)}}function de(t,e){return function(){return he(this,t,e.apply(this,arguments))}}_t.prototype={constructor:_t,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}},It.prototype={add:function(t){this._names.indexOf(t)<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};var pe=[null];function ge(t,e){this._groups=t,this._parents=e}function ye(){return new ge([[document.documentElement]],pe)}function ve(t){return"string"==typeof t?new ge([[document.querySelector(t)]],[document.documentElement]):new ge([[t]],pe)}function me(t){return ve(st(t).call(document.documentElement))}function be(t,e){if(t=function(t){let e;for(;e=t.sourceEvent;)t=e;return t}(t),void 0===e&&(e=t.currentTarget),e){var n=e.ownerSVGElement||e;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=t.clientX,r.y=t.clientY,[(r=r.matrixTransform(e.getScreenCTM().inverse())).x,r.y]}if(e.getBoundingClientRect){var i=e.getBoundingClientRect();return[t.clientX-i.left-e.clientLeft,t.clientY-i.top-e.clientTop]}}return[t.pageX,t.pageY]}ge.prototype=ye.prototype={constructor:ge,select:function(t){"function"!=typeof t&&(t=ft(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var a,o,l=e[i],u=l.length,c=r[i]=new Array(u),s=0;s<u;++s)(a=l[s])&&(o=t.call(a,a.__data__,s,l))&&("__data__"in a&&(o.__data__=a.__data__),c[s]=o);return new ge(r,this._parents)},selectAll:function(t){t="function"==typeof t?gt(t):pt(t);for(var e=this._groups,n=e.length,r=[],i=[],a=0;a<n;++a)for(var o,l=e[a],u=l.length,c=0;c<u;++c)(o=l[c])&&(r.push(t.call(o,o.__data__,c,l)),i.push(o));return new ge(r,i)},selectChild:function(t){return this.select(null==t?bt:function(t){return function(){return mt.call(this.children,t)}}("function"==typeof t?t:vt(t)))},selectChildren:function(t){return this.selectAll(null==t?xt:function(t){return function(){return wt.call(this.children,t)}}("function"==typeof t?t:vt(t)))},filter:function(t){"function"!=typeof t&&(t=yt(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var a,o=e[i],l=o.length,u=r[i]=[],c=0;c<l;++c)(a=o[c])&&t.call(a,a.__data__,c,o)&&u.push(a);return new ge(r,this._parents)},data:function(t,e){if(!arguments.length)return Array.from(this,St);var n,r=e?Mt:At,i=this._parents,a=this._groups;"function"!=typeof t&&(n=t,t=function(){return n});for(var o=a.length,l=new Array(o),u=new Array(o),c=new Array(o),s=0;s<o;++s){var h=i[s],f=a[s],d=f.length,p=Ct(t.call(h,h&&h.__data__,s,i)),g=p.length,y=u[s]=new Array(g),v=l[s]=new Array(g);r(h,f,y,v,c[s]=new Array(d),p,e);for(var m,b,w=0,x=0;w<g;++w)if(m=y[w]){for(w>=x&&(x=w+1);!(b=v[x])&&++x<g;);m._next=b||null}}return(l=new ge(l,i))._enter=u,l._exit=c,l},enter:function(){return new ge(this._enter||this._groups.map(kt),this._parents)},exit:function(){return new ge(this._exit||this._groups.map(kt),this._parents)},join:function(t,e,n){var r=this.enter(),i=this,a=this.exit();return"function"==typeof t?(r=t(r))&&(r=r.selection()):r=r.append(t+""),null!=e&&(i=e(i))&&(i=i.selection()),null==n?a.remove():n(a),r&&i?r.merge(i).order():i},merge:function(t){for(var e=t.selection?t.selection():t,n=this._groups,r=e._groups,i=n.length,a=r.length,o=Math.min(i,a),l=new Array(i),u=0;u<o;++u)for(var c,s=n[u],h=r[u],f=s.length,d=l[u]=new Array(f),p=0;p<f;++p)(c=s[p]||h[p])&&(d[p]=c);for(;u<i;++u)l[u]=n[u];return new ge(l,this._parents)},selection:function(){return this},order:function(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var r,i=t[e],a=i.length-1,o=i[a];--a>=0;)(r=i[a])&&(o&&4^r.compareDocumentPosition(o)&&o.parentNode.insertBefore(r,o),o=r);return this},sort:function(t){function e(e,n){return e&&n?t(e.__data__,n.__data__):!e-!n}t||(t=Et);for(var n=this._groups,r=n.length,i=new Array(r),a=0;a<r;++a){for(var o,l=n[a],u=l.length,c=i[a]=new Array(u),s=0;s<u;++s)(o=l[s])&&(c[s]=o);c.sort(e)}return new ge(i,this._parents).order()},call:function(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this},nodes:function(){return Array.from(this)},node:function(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],i=0,a=r.length;i<a;++i){var o=r[i];if(o)return o}return null},size:function(){let t=0;for(const e of this)++t;return t},empty:function(){return!this.node()},each:function(t){for(var e=this._groups,n=0,r=e.length;n<r;++n)for(var i,a=e[n],o=0,l=a.length;o<l;++o)(i=a[o])&&t.call(i,i.__data__,o,a);return this},attr:function(t,e){var n=lt(t);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((null==e?n.local?jt:zt:"function"==typeof e?n.local?Lt:$t:n.local?Vt:Nt)(n,e))},style:function(t,e,n){return arguments.length>1?this.each((null==e?Pt:"function"==typeof e?Ot:Rt)(t,e,null==n?"":n)):Ft(this.node(),t)},property:function(t,e){return arguments.length>1?this.each((null==e?Bt:"function"==typeof e?qt:Dt)(t,e)):this.node()[t]},classed:function(t,e){var n=Wt(t+"");if(arguments.length<2){for(var r=Xt(this.node()),i=-1,a=n.length;++i<a;)if(!r.contains(n[i]))return!1;return!0}return this.each(("function"==typeof e?Kt:e?Ut:Gt)(n,e))},text:function(t){return arguments.length?this.each(null==t?Zt:("function"==typeof t?Jt:Qt)(t)):this.node().textContent},html:function(t){return arguments.length?this.each(null==t?te:("function"==typeof t?ne:ee)(t)):this.node().innerHTML},raise:function(){return this.each(re)},lower:function(){return this.each(ie)},append:function(t){var e="function"==typeof t?t:st(t);return this.select((function(){return this.appendChild(e.apply(this,arguments))}))},insert:function(t,e){var n="function"==typeof t?t:st(t),r=null==e?ae:"function"==typeof e?e:ft(e);return this.select((function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)}))},remove:function(){return this.each(oe)},clone:function(t){return this.select(t?ue:le)},datum:function(t){return arguments.length?this.property("__data__",t):this.node().__data__},on:function(t,e,n){var r,i,a=function(t){return t.trim().split(/^|\s+/).map((function(t){var e="",n=t.indexOf(".");return n>=0&&(e=t.slice(n+1),t=t.slice(0,n)),{type:t,name:e}}))}(t+""),o=a.length;if(!(arguments.length<2)){for(l=e?se:ce,r=0;r<o;++r)this.each(l(a[r],e,n));return this}var l=this.node().__on;if(l)for(var u,c=0,s=l.length;c<s;++c)for(r=0,u=l[c];r<o;++r)if((i=a[r]).type===u.type&&i.name===u.name)return u.value},dispatch:function(t,e){return this.each(("function"==typeof e?de:fe)(t,e))},[Symbol.iterator]:function*(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r,i=t[e],a=0,o=i.length;a<o;++a)(r=i[a])&&(yield r)}};const we={capture:!0,passive:!1};function xe(t){t.preventDefault(),t.stopImmediatePropagation()}function ke(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function _e(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function Ae(){}var Me=.7,Se=1/Me,Ce="\\s*([+-]?\\d+)\\s*",Ee="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",ze="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",je=/^#([0-9a-f]{3,8})$/,Ne=new RegExp(`^rgb\\(${Ce},${Ce},${Ce}\\)$`),Ve=new RegExp(`^rgb\\(${ze},${ze},${ze}\\)$`),$e=new RegExp(`^rgba\\(${Ce},${Ce},${Ce},${Ee}\\)$`),Le=new RegExp(`^rgba\\(${ze},${ze},${ze},${Ee}\\)$`),Te=new RegExp(`^hsl\\(${Ee},${ze},${ze}\\)$`),Pe=new RegExp(`^hsla\\(${Ee},${ze},${ze},${Ee}\\)$`),Re={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function Oe(){return this.rgb().formatHex()}function Fe(){return this.rgb().formatRgb()}function Be(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=je.exec(t))?(n=e[1].length,e=parseInt(e[1],16),6===n?De(e):3===n?new Xe(e>>8&15|e>>4&240,e>>4&15|240&e,(15&e)<<4|15&e,1):8===n?qe(e>>24&255,e>>16&255,e>>8&255,(255&e)/255):4===n?qe(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|240&e,((15&e)<<4|15&e)/255):null):(e=Ne.exec(t))?new Xe(e[1],e[2],e[3],1):(e=Ve.exec(t))?new Xe(255*e[1]/100,255*e[2]/100,255*e[3]/100,1):(e=$e.exec(t))?qe(e[1],e[2],e[3],e[4]):(e=Le.exec(t))?qe(255*e[1]/100,255*e[2]/100,255*e[3]/100,e[4]):(e=Te.exec(t))?Ke(e[1],e[2]/100,e[3]/100,1):(e=Pe.exec(t))?Ke(e[1],e[2]/100,e[3]/100,e[4]):Re.hasOwnProperty(t)?De(Re[t]):"transparent"===t?new Xe(NaN,NaN,NaN,0):null}function De(t){return new Xe(t>>16&255,t>>8&255,255&t,1)}function qe(t,e,n,r){return r<=0&&(t=e=n=NaN),new Xe(t,e,n,r)}function We(t,e,n,r){return 1===arguments.length?((i=t)instanceof Ae||(i=Be(i)),i?new Xe((i=i.rgb()).r,i.g,i.b,i.opacity):new Xe):new Xe(t,e,n,null==r?1:r);var i}function Xe(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}function Ie(){return`#${Ge(this.r)}${Ge(this.g)}${Ge(this.b)}`}function He(){const t=Ye(this.opacity);return`${1===t?"rgb(":"rgba("}${Ue(this.r)}, ${Ue(this.g)}, ${Ue(this.b)}${1===t?")":`, ${t})`}`}function Ye(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function Ue(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function Ge(t){return((t=Ue(t))<16?"0":"")+t.toString(16)}function Ke(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new Qe(t,e,n,r)}function Ze(t){if(t instanceof Qe)return new Qe(t.h,t.s,t.l,t.opacity);if(t instanceof Ae||(t=Be(t)),!t)return new Qe;if(t instanceof Qe)return t;var e=(t=t.rgb()).r/255,n=t.g/255,r=t.b/255,i=Math.min(e,n,r),a=Math.max(e,n,r),o=NaN,l=a-i,u=(a+i)/2;return l?(o=e===a?(n-r)/l+6*(n<r):n===a?(r-e)/l+2:(e-n)/l+4,l/=u<.5?a+i:2-a-i,o*=60):l=u>0&&u<1?0:o,new Qe(o,l,u,t.opacity)}function Qe(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}function Je(t){return(t=(t||0)%360)<0?t+360:t}function tn(t){return Math.max(0,Math.min(1,t||0))}function en(t,e,n){return 255*(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)}ke(Ae,Be,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:Oe,formatHex:Oe,formatHex8:function(){return this.rgb().formatHex8()},formatHsl:function(){return Ze(this).formatHsl()},formatRgb:Fe,toString:Fe}),ke(Xe,We,_e(Ae,{brighter(t){return t=null==t?Se:Math.pow(Se,t),new Xe(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=null==t?Me:Math.pow(Me,t),new Xe(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new Xe(Ue(this.r),Ue(this.g),Ue(this.b),Ye(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Ie,formatHex:Ie,formatHex8:function(){return`#${Ge(this.r)}${Ge(this.g)}${Ge(this.b)}${Ge(255*(isNaN(this.opacity)?1:this.opacity))}`},formatRgb:He,toString:He})),ke(Qe,(function(t,e,n,r){return 1===arguments.length?Ze(t):new Qe(t,e,n,null==r?1:r)}),_e(Ae,{brighter(t){return t=null==t?Se:Math.pow(Se,t),new Qe(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=null==t?Me:Math.pow(Me,t),new Qe(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+360*(this.h<0),e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,i=2*n-r;return new Xe(en(t>=240?t-240:t+120,i,r),en(t,i,r),en(t<120?t+240:t-120,i,r),this.opacity)},clamp(){return new Qe(Je(this.h),tn(this.s),tn(this.l),Ye(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=Ye(this.opacity);return`${1===t?"hsl(":"hsla("}${Je(this.h)}, ${100*tn(this.s)}%, ${100*tn(this.l)}%${1===t?")":`, ${t})`}`}}));var nn=t=>()=>t;function rn(t){return 1==(t=+t)?an:function(e,n){return n-e?function(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}(e,n,t):nn(isNaN(e)?n:e)}}function an(t,e){var n=e-t;return n?function(t,e){return function(n){return t+n*e}}(t,n):nn(isNaN(t)?e:t)}var on=function t(e){var n=rn(e);function r(t,e){var r=n((t=We(t)).r,(e=We(e)).r),i=n(t.g,e.g),a=n(t.b,e.b),o=an(t.opacity,e.opacity);return function(e){return t.r=r(e),t.g=i(e),t.b=a(e),t.opacity=o(e),t+""}}return r.gamma=t,r}(1);function ln(t,e){e||(e=[]);var n,r=t?Math.min(e.length,t.length):0,i=e.slice();return function(a){for(n=0;n<r;++n)i[n]=t[n]*(1-a)+e[n]*a;return i}}function un(t,e){var n,r=e?e.length:0,i=t?Math.min(r,t.length):0,a=new Array(i),o=new Array(r);for(n=0;n<i;++n)a[n]=gn(t[n],e[n]);for(;n<r;++n)o[n]=e[n];return function(t){for(n=0;n<i;++n)o[n]=a[n](t);return o}}function cn(t,e){var n=new Date;return t=+t,e=+e,function(r){return n.setTime(t*(1-r)+e*r),n}}function sn(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function hn(t,e){var n,r={},i={};for(n in null!==t&&"object"==typeof t||(t={}),null!==e&&"object"==typeof e||(e={}),e)n in t?r[n]=gn(t[n],e[n]):i[n]=e[n];return function(t){for(n in r)i[n]=r[n](t);return i}}var fn=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,dn=new RegExp(fn.source,"g");function pn(t,e){var n,r,i,a=fn.lastIndex=dn.lastIndex=0,o=-1,l=[],u=[];for(t+="",e+="";(n=fn.exec(t))&&(r=dn.exec(e));)(i=r.index)>a&&(i=e.slice(a,i),l[o]?l[o]+=i:l[++o]=i),(n=n[0])===(r=r[0])?l[o]?l[o]+=r:l[++o]=r:(l[++o]=null,u.push({i:o,x:sn(n,r)})),a=dn.lastIndex;return a<e.length&&(i=e.slice(a),l[o]?l[o]+=i:l[++o]=i),l.length<2?u[0]?function(t){return function(e){return t(e)+""}}(u[0].x):function(t){return function(){return t}}(e):(e=u.length,function(t){for(var n,r=0;r<e;++r)l[(n=u[r]).i]=n.x(t);return l.join("")})}function gn(t,e){var n,r,i=typeof e;return null==e||"boolean"===i?nn(e):("number"===i?sn:"string"===i?(n=Be(e))?(e=n,on):pn:e instanceof Be?on:e instanceof Date?cn:(r=e,!ArrayBuffer.isView(r)||r instanceof DataView?Array.isArray(e)?un:"function"!=typeof e.valueOf&&"function"!=typeof e.toString||isNaN(e)?hn:sn:ln))(t,e)}function yn(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}}var vn,mn=180/Math.PI,bn={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function wn(t,e,n,r,i,a){var o,l,u;return(o=Math.sqrt(t*t+e*e))&&(t/=o,e/=o),(u=t*n+e*r)&&(n-=t*u,r-=e*u),(l=Math.sqrt(n*n+r*r))&&(n/=l,r/=l,u/=l),t*r<e*n&&(t=-t,e=-e,u=-u,o=-o),{translateX:i,translateY:a,rotate:Math.atan2(e,t)*mn,skewX:Math.atan(u)*mn,scaleX:o,scaleY:l}}function xn(t,e,n,r){function i(t){return t.length?t.pop()+" ":""}return function(a,o){var l=[],u=[];return a=t(a),o=t(o),function(t,r,i,a,o,l){if(t!==i||r!==a){var u=o.push("translate(",null,e,null,n);l.push({i:u-4,x:sn(t,i)},{i:u-2,x:sn(r,a)})}else(i||a)&&o.push("translate("+i+e+a+n)}(a.translateX,a.translateY,o.translateX,o.translateY,l,u),function(t,e,n,a){t!==e?(t-e>180?e+=360:e-t>180&&(t+=360),a.push({i:n.push(i(n)+"rotate(",null,r)-2,x:sn(t,e)})):e&&n.push(i(n)+"rotate("+e+r)}(a.rotate,o.rotate,l,u),function(t,e,n,a){t!==e?a.push({i:n.push(i(n)+"skewX(",null,r)-2,x:sn(t,e)}):e&&n.push(i(n)+"skewX("+e+r)}(a.skewX,o.skewX,l,u),function(t,e,n,r,a,o){if(t!==n||e!==r){var l=a.push(i(a)+"scale(",null,",",null,")");o.push({i:l-4,x:sn(t,n)},{i:l-2,x:sn(e,r)})}else 1===n&&1===r||a.push(i(a)+"scale("+n+","+r+")")}(a.scaleX,a.scaleY,o.scaleX,o.scaleY,l,u),a=o=null,function(t){for(var e,n=-1,r=u.length;++n<r;)l[(e=u[n]).i]=e.x(t);return l.join("")}}}var kn=xn((function(t){const e=new("function"==typeof DOMMatrix?DOMMatrix:WebKitCSSMatrix)(t+"");return e.isIdentity?bn:wn(e.a,e.b,e.c,e.d,e.e,e.f)}),"px, ","px)","deg)"),_n=xn((function(t){return null==t?bn:(vn||(vn=document.createElementNS("http://www.w3.org/2000/svg","g")),vn.setAttribute("transform",t),(t=vn.transform.baseVal.consolidate())?wn((t=t.matrix).a,t.b,t.c,t.d,t.e,t.f):bn)}),", ",")",")");function An(t){return((t=Math.exp(t))+1/t)/2}var Mn,Sn,Cn=function t(e,n,r){function i(t,i){var a,o,l=t[0],u=t[1],c=t[2],s=i[0],h=i[1],f=i[2],d=s-l,p=h-u,g=d*d+p*p;if(g<1e-12)o=Math.log(f/c)/e,a=function(t){return[l+t*d,u+t*p,c*Math.exp(e*t*o)]};else{var y=Math.sqrt(g),v=(f*f-c*c+r*g)/(2*c*n*y),m=(f*f-c*c-r*g)/(2*f*n*y),b=Math.log(Math.sqrt(v*v+1)-v),w=Math.log(Math.sqrt(m*m+1)-m);o=(w-b)/e,a=function(t){var r,i=t*o,a=An(b),s=c/(n*y)*(a*(r=e*i+b,((r=Math.exp(2*r))-1)/(r+1))-function(t){return((t=Math.exp(t))-1/t)/2}(b));return[l+s*d,u+s*p,c*a/An(e*i+b)]}}return a.duration=1e3*o*e/Math.SQRT2,a}return i.rho=function(e){var n=Math.max(.001,+e),r=n*n;return t(n,r,r*r)},i}(Math.SQRT2,2,4),En=0,zn=0,jn=0,Nn=1e3,Vn=0,$n=0,Ln=0,Tn="object"==typeof performance&&performance.now?performance:Date,Pn="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function Rn(){return $n||(Pn(On),$n=Tn.now()+Ln)}function On(){$n=0}function Fn(){this._call=this._time=this._next=null}function Bn(t,e,n){var r=new Fn;return r.restart(t,e,n),r}function Dn(){$n=(Vn=Tn.now())+Ln,En=zn=0;try{!function(){Rn(),++En;for(var t,e=Mn;e;)(t=$n-e._time)>=0&&e._call.call(void 0,t),e=e._next;--En}()}finally{En=0,function(){var t,e,n=Mn,r=1/0;for(;n;)n._call?(r>n._time&&(r=n._time),t=n,n=n._next):(e=n._next,n._next=null,n=t?t._next=e:Mn=e);Sn=t,Wn(r)}(),$n=0}}function qn(){var t=Tn.now(),e=t-Vn;e>Nn&&(Ln-=e,Vn=t)}function Wn(t){En||(zn&&(zn=clearTimeout(zn)),t-$n>24?(t<1/0&&(zn=setTimeout(Dn,t-Tn.now()-Ln)),jn&&(jn=clearInterval(jn))):(jn||(Vn=Tn.now(),jn=setInterval(qn,Nn)),En=1,Pn(Dn)))}function Xn(t,e,n){var r=new Fn;return e=null==e?0:+e,r.restart((n=>{r.stop(),t(n+e)}),e,n),r}Fn.prototype=Bn.prototype={constructor:Fn,restart:function(t,e,n){if("function"!=typeof t)throw new TypeError("callback is not a function");n=(null==n?Rn():+n)+(null==e?0:+e),this._next||Sn===this||(Sn?Sn._next=this:Mn=this,Sn=this),this._call=t,this._time=n,Wn()},stop:function(){this._call&&(this._call=null,this._time=1/0,Wn())}};var In=et("start","end","cancel","interrupt"),Hn=[],Yn=0,Un=1,Gn=2,Kn=3,Zn=4,Qn=5,Jn=6;function tr(t,e,n,r,i,a){var o=t.__transition;if(o){if(n in o)return}else t.__transition={};!function(t,e,n){var r,i=t.__transition;function a(t){n.state=Un,n.timer.restart(o,n.delay,n.time),n.delay<=t&&o(t-n.delay)}function o(a){var c,s,h,f;if(n.state!==Un)return u();for(c in i)if((f=i[c]).name===n.name){if(f.state===Kn)return Xn(o);f.state===Zn?(f.state=Jn,f.timer.stop(),f.on.call("interrupt",t,t.__data__,f.index,f.group),delete i[c]):+c<e&&(f.state=Jn,f.timer.stop(),f.on.call("cancel",t,t.__data__,f.index,f.group),delete i[c])}if(Xn((function(){n.state===Kn&&(n.state=Zn,n.timer.restart(l,n.delay,n.time),l(a))})),n.state=Gn,n.on.call("start",t,t.__data__,n.index,n.group),n.state===Gn){for(n.state=Kn,r=new Array(h=n.tween.length),c=0,s=-1;c<h;++c)(f=n.tween[c].value.call(t,t.__data__,n.index,n.group))&&(r[++s]=f);r.length=s+1}}function l(e){for(var i=e<n.duration?n.ease.call(null,e/n.duration):(n.timer.restart(u),n.state=Qn,1),a=-1,o=r.length;++a<o;)r[a].call(t,i);n.state===Qn&&(n.on.call("end",t,t.__data__,n.index,n.group),u())}function u(){for(var r in n.state=Jn,n.timer.stop(),delete i[e],i)return;delete t.__transition}i[e]=n,n.timer=Bn(a,0,n.time)}(t,n,{name:e,index:r,group:i,on:In,tween:Hn,time:a.time,delay:a.delay,duration:a.duration,ease:a.ease,timer:null,state:Yn})}function er(t,e){var n=rr(t,e);if(n.state>Yn)throw new Error("too late; already scheduled");return n}function nr(t,e){var n=rr(t,e);if(n.state>Kn)throw new Error("too late; already running");return n}function rr(t,e){var n=t.__transition;if(!n||!(n=n[e]))throw new Error("transition not found");return n}function ir(t,e){var n,r,i,a=t.__transition,o=!0;if(a){for(i in e=null==e?null:e+"",a)(n=a[i]).name===e?(r=n.state>Gn&&n.state<Qn,n.state=Jn,n.timer.stop(),n.on.call(r?"interrupt":"cancel",t,t.__data__,n.index,n.group),delete a[i]):o=!1;o&&delete t.__transition}}function ar(t,e){var n,r;return function(){var i=nr(this,t),a=i.tween;if(a!==n)for(var o=0,l=(r=n=a).length;o<l;++o)if(r[o].name===e){(r=r.slice()).splice(o,1);break}i.tween=r}}function or(t,e,n){var r,i;if("function"!=typeof n)throw new Error;return function(){var a=nr(this,t),o=a.tween;if(o!==r){i=(r=o).slice();for(var l={name:e,value:n},u=0,c=i.length;u<c;++u)if(i[u].name===e){i[u]=l;break}u===c&&i.push(l)}a.tween=i}}function lr(t,e,n){var r=t._id;return t.each((function(){var t=nr(this,r);(t.value||(t.value={}))[e]=n.apply(this,arguments)})),function(t){return rr(t,r).value[e]}}function ur(t,e){var n;return("number"==typeof e?sn:e instanceof Be?on:(n=Be(e))?(e=n,on):pn)(t,e)}function cr(t){return function(){this.removeAttribute(t)}}function sr(t){return function(){this.removeAttributeNS(t.space,t.local)}}function hr(t,e,n){var r,i,a=n+"";return function(){var o=this.getAttribute(t);return o===a?null:o===r?i:i=e(r=o,n)}}function fr(t,e,n){var r,i,a=n+"";return function(){var o=this.getAttributeNS(t.space,t.local);return o===a?null:o===r?i:i=e(r=o,n)}}function dr(t,e,n){var r,i,a;return function(){var o,l,u=n(this);if(null!=u)return(o=this.getAttribute(t))===(l=u+"")?null:o===r&&l===i?a:(i=l,a=e(r=o,u));this.removeAttribute(t)}}function pr(t,e,n){var r,i,a;return function(){var o,l,u=n(this);if(null!=u)return(o=this.getAttributeNS(t.space,t.local))===(l=u+"")?null:o===r&&l===i?a:(i=l,a=e(r=o,u));this.removeAttributeNS(t.space,t.local)}}function gr(t,e){var n,r;function i(){var i=e.apply(this,arguments);return i!==r&&(n=(r=i)&&function(t,e){return function(n){this.setAttributeNS(t.space,t.local,e.call(this,n))}}(t,i)),n}return i._value=e,i}function yr(t,e){var n,r;function i(){var i=e.apply(this,arguments);return i!==r&&(n=(r=i)&&function(t,e){return function(n){this.setAttribute(t,e.call(this,n))}}(t,i)),n}return i._value=e,i}function vr(t,e){return function(){er(this,t).delay=+e.apply(this,arguments)}}function mr(t,e){return e=+e,function(){er(this,t).delay=e}}function br(t,e){return function(){nr(this,t).duration=+e.apply(this,arguments)}}function wr(t,e){return e=+e,function(){nr(this,t).duration=e}}var xr=ye.prototype.constructor;function kr(t){return function(){this.style.removeProperty(t)}}var _r=0;function Ar(t,e,n,r){this._groups=t,this._parents=e,this._name=n,this._id=r}function Mr(){return++_r}var Sr=ye.prototype;function Cr(t){return--t*t*t+1}Ar.prototype={constructor:Ar,select:function(t){var e=this._name,n=this._id;"function"!=typeof t&&(t=ft(t));for(var r=this._groups,i=r.length,a=new Array(i),o=0;o<i;++o)for(var l,u,c=r[o],s=c.length,h=a[o]=new Array(s),f=0;f<s;++f)(l=c[f])&&(u=t.call(l,l.__data__,f,c))&&("__data__"in l&&(u.__data__=l.__data__),h[f]=u,tr(h[f],e,n,f,h,rr(l,n)));return new Ar(a,this._parents,e,n)},selectAll:function(t){var e=this._name,n=this._id;"function"!=typeof t&&(t=pt(t));for(var r=this._groups,i=r.length,a=[],o=[],l=0;l<i;++l)for(var u,c=r[l],s=c.length,h=0;h<s;++h)if(u=c[h]){for(var f,d=t.call(u,u.__data__,h,c),p=rr(u,n),g=0,y=d.length;g<y;++g)(f=d[g])&&tr(f,e,n,g,d,p);a.push(d),o.push(u)}return new Ar(a,o,e,n)},selectChild:Sr.selectChild,selectChildren:Sr.selectChildren,filter:function(t){"function"!=typeof t&&(t=yt(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var a,o=e[i],l=o.length,u=r[i]=[],c=0;c<l;++c)(a=o[c])&&t.call(a,a.__data__,c,o)&&u.push(a);return new Ar(r,this._parents,this._name,this._id)},merge:function(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,n=t._groups,r=e.length,i=n.length,a=Math.min(r,i),o=new Array(r),l=0;l<a;++l)for(var u,c=e[l],s=n[l],h=c.length,f=o[l]=new Array(h),d=0;d<h;++d)(u=c[d]||s[d])&&(f[d]=u);for(;l<r;++l)o[l]=e[l];return new Ar(o,this._parents,this._name,this._id)},selection:function(){return new xr(this._groups,this._parents)},transition:function(){for(var t=this._name,e=this._id,n=Mr(),r=this._groups,i=r.length,a=0;a<i;++a)for(var o,l=r[a],u=l.length,c=0;c<u;++c)if(o=l[c]){var s=rr(o,e);tr(o,t,n,c,l,{time:s.time+s.delay+s.duration,delay:0,duration:s.duration,ease:s.ease})}return new Ar(r,this._parents,t,n)},call:Sr.call,nodes:Sr.nodes,node:Sr.node,size:Sr.size,empty:Sr.empty,each:Sr.each,on:function(t,e){var n=this._id;return arguments.length<2?rr(this.node(),n).on.on(t):this.each(function(t,e,n){var r,i,a=function(t){return(t+"").trim().split(/^|\s+/).every((function(t){var e=t.indexOf(".");return e>=0&&(t=t.slice(0,e)),!t||"start"===t}))}(e)?er:nr;return function(){var o=a(this,t),l=o.on;l!==r&&(i=(r=l).copy()).on(e,n),o.on=i}}(n,t,e))},attr:function(t,e){var n=lt(t),r="transform"===n?_n:ur;return this.attrTween(t,"function"==typeof e?(n.local?pr:dr)(n,r,lr(this,"attr."+t,e)):null==e?(n.local?sr:cr)(n):(n.local?fr:hr)(n,r,e))},attrTween:function(t,e){var n="attr."+t;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(null==e)return this.tween(n,null);if("function"!=typeof e)throw new Error;var r=lt(t);return this.tween(n,(r.local?gr:yr)(r,e))},style:function(t,e,n){var r="transform"==(t+="")?kn:ur;return null==e?this.styleTween(t,function(t,e){var n,r,i;return function(){var a=Ft(this,t),o=(this.style.removeProperty(t),Ft(this,t));return a===o?null:a===n&&o===r?i:i=e(n=a,r=o)}}(t,r)).on("end.style."+t,kr(t)):"function"==typeof e?this.styleTween(t,function(t,e,n){var r,i,a;return function(){var o=Ft(this,t),l=n(this),u=l+"";return null==l&&(this.style.removeProperty(t),u=l=Ft(this,t)),o===u?null:o===r&&u===i?a:(i=u,a=e(r=o,l))}}(t,r,lr(this,"style."+t,e))).each(function(t,e){var n,r,i,a,o="style."+e,l="end."+o;return function(){var u=nr(this,t),c=u.on,s=null==u.value[o]?a||(a=kr(e)):void 0;c===n&&i===s||(r=(n=c).copy()).on(l,i=s),u.on=r}}(this._id,t)):this.styleTween(t,function(t,e,n){var r,i,a=n+"";return function(){var o=Ft(this,t);return o===a?null:o===r?i:i=e(r=o,n)}}(t,r,e),n).on("end.style."+t,null)},styleTween:function(t,e,n){var r="style."+(t+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(null==e)return this.tween(r,null);if("function"!=typeof e)throw new Error;return this.tween(r,function(t,e,n){var r,i;function a(){var a=e.apply(this,arguments);return a!==i&&(r=(i=a)&&function(t,e,n){return function(r){this.style.setProperty(t,e.call(this,r),n)}}(t,a,n)),r}return a._value=e,a}(t,e,null==n?"":n))},text:function(t){return this.tween("text","function"==typeof t?function(t){return function(){var e=t(this);this.textContent=null==e?"":e}}(lr(this,"text",t)):function(t){return function(){this.textContent=t}}(null==t?"":t+""))},textTween:function(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(null==t)return this.tween(e,null);if("function"!=typeof t)throw new Error;return this.tween(e,function(t){var e,n;function r(){var r=t.apply(this,arguments);return r!==n&&(e=(n=r)&&function(t){return function(e){this.textContent=t.call(this,e)}}(r)),e}return r._value=t,r}(t))},remove:function(){return this.on("end.remove",function(t){return function(){var e=this.parentNode;for(var n in this.__transition)if(+n!==t)return;e&&e.removeChild(this)}}(this._id))},tween:function(t,e){var n=this._id;if(t+="",arguments.length<2){for(var r,i=rr(this.node(),n).tween,a=0,o=i.length;a<o;++a)if((r=i[a]).name===t)return r.value;return null}return this.each((null==e?ar:or)(n,t,e))},delay:function(t){var e=this._id;return arguments.length?this.each(("function"==typeof t?vr:mr)(e,t)):rr(this.node(),e).delay},duration:function(t){var e=this._id;return arguments.length?this.each(("function"==typeof t?br:wr)(e,t)):rr(this.node(),e).duration},ease:function(t){var e=this._id;return arguments.length?this.each(function(t,e){if("function"!=typeof e)throw new Error;return function(){nr(this,t).ease=e}}(e,t)):rr(this.node(),e).ease},easeVarying:function(t){if("function"!=typeof t)throw new Error;return this.each(function(t,e){return function(){var n=e.apply(this,arguments);if("function"!=typeof n)throw new Error;nr(this,t).ease=n}}(this._id,t))},end:function(){var t,e,n=this,r=n._id,i=n.size();return new Promise((function(a,o){var l={value:o},u={value:function(){0==--i&&a()}};n.each((function(){var n=nr(this,r),i=n.on;i!==t&&((e=(t=i).copy())._.cancel.push(l),e._.interrupt.push(l),e._.end.push(u)),n.on=e})),0===i&&a()}))},[Symbol.iterator]:Sr[Symbol.iterator]};var Er={time:null,delay:0,duration:250,ease:function(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}};function zr(t,e){for(var n;!(n=t.__transition)||!(n=n[e]);)if(!(t=t.parentNode))throw new Error(`transition ${e} not found`);return n}function jr(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,r=t.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+t.slice(n+1)]}function Nr(t){return(t=jr(Math.abs(t)))?t[1]:NaN}ye.prototype.interrupt=function(t){return this.each((function(){ir(this,t)}))},ye.prototype.transition=function(t){var e,n;t instanceof Ar?(e=t._id,t=t._name):(e=Mr(),(n=Er).time=Rn(),t=null==t?null:t+"");for(var r=this._groups,i=r.length,a=0;a<i;++a)for(var o,l=r[a],u=l.length,c=0;c<u;++c)(o=l[c])&&tr(o,t,e,c,l,n||zr(o,e));return new Ar(r,this._parents,t,e)};var Vr,$r=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Lr(t){if(!(e=$r.exec(t)))throw new Error("invalid format: "+t);var e;return new Tr({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}function Tr(t){this.fill=void 0===t.fill?" ":t.fill+"",this.align=void 0===t.align?">":t.align+"",this.sign=void 0===t.sign?"-":t.sign+"",this.symbol=void 0===t.symbol?"":t.symbol+"",this.zero=!!t.zero,this.width=void 0===t.width?void 0:+t.width,this.comma=!!t.comma,this.precision=void 0===t.precision?void 0:+t.precision,this.trim=!!t.trim,this.type=void 0===t.type?"":t.type+""}function Pr(t,e){var n=jr(t,e);if(!n)return t+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}Lr.prototype=Tr.prototype,Tr.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};var Rr={"%":(t,e)=>(100*t).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:function(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)},e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>Pr(100*t,e),r:Pr,s:function(t,e){var n=jr(t,e);if(!n)return t+"";var r=n[0],i=n[1],a=i-(Vr=3*Math.max(-8,Math.min(8,Math.floor(i/3))))+1,o=r.length;return a===o?r:a>o?r+new Array(a-o+1).join("0"):a>0?r.slice(0,a)+"."+r.slice(a):"0."+new Array(1-a).join("0")+jr(t,Math.max(0,e+a-1))[0]},X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function Or(t){return t}var Fr,Br,Dr,qr=Array.prototype.map,Wr=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function Xr(t){var e,n,r=void 0===t.grouping||void 0===t.thousands?Or:(e=qr.call(t.grouping,Number),n=t.thousands+"",function(t,r){for(var i=t.length,a=[],o=0,l=e[0],u=0;i>0&&l>0&&(u+l+1>r&&(l=Math.max(1,r-u)),a.push(t.substring(i-=l,i+l)),!((u+=l+1)>r));)l=e[o=(o+1)%e.length];return a.reverse().join(n)}),i=void 0===t.currency?"":t.currency[0]+"",a=void 0===t.currency?"":t.currency[1]+"",o=void 0===t.decimal?".":t.decimal+"",l=void 0===t.numerals?Or:function(t){return function(e){return e.replace(/[0-9]/g,(function(e){return t[+e]}))}}(qr.call(t.numerals,String)),u=void 0===t.percent?"%":t.percent+"",c=void 0===t.minus?"−":t.minus+"",s=void 0===t.nan?"NaN":t.nan+"";function h(t){var e=(t=Lr(t)).fill,n=t.align,h=t.sign,f=t.symbol,d=t.zero,p=t.width,g=t.comma,y=t.precision,v=t.trim,m=t.type;"n"===m?(g=!0,m="g"):Rr[m]||(void 0===y&&(y=12),v=!0,m="g"),(d||"0"===e&&"="===n)&&(d=!0,e="0",n="=");var b="$"===f?i:"#"===f&&/[boxX]/.test(m)?"0"+m.toLowerCase():"",w="$"===f?a:/[%p]/.test(m)?u:"",x=Rr[m],k=/[defgprs%]/.test(m);function _(t){var i,a,u,f=b,_=w;if("c"===m)_=x(t)+_,t="";else{var A=(t=+t)<0||1/t<0;if(t=isNaN(t)?s:x(Math.abs(t),y),v&&(t=function(t){t:for(var e,n=t.length,r=1,i=-1;r<n;++r)switch(t[r]){case".":i=e=r;break;case"0":0===i&&(i=r),e=r;break;default:if(!+t[r])break t;i>0&&(i=0)}return i>0?t.slice(0,i)+t.slice(e+1):t}(t)),A&&0==+t&&"+"!==h&&(A=!1),f=(A?"("===h?h:c:"-"===h||"("===h?"":h)+f,_=("s"===m?Wr[8+Vr/3]:"")+_+(A&&"("===h?")":""),k)for(i=-1,a=t.length;++i<a;)if(48>(u=t.charCodeAt(i))||u>57){_=(46===u?o+t.slice(i+1):t.slice(i))+_,t=t.slice(0,i);break}}g&&!d&&(t=r(t,1/0));var M=f.length+t.length+_.length,S=M<p?new Array(p-M+1).join(e):"";switch(g&&d&&(t=r(S+t,S.length?p-_.length:1/0),S=""),n){case"<":t=f+t+_+S;break;case"=":t=f+S+t+_;break;case"^":t=S.slice(0,M=S.length>>1)+f+t+_+S.slice(M);break;default:t=S+f+t+_}return l(t)}return y=void 0===y?6:/[gprs]/.test(m)?Math.max(1,Math.min(21,y)):Math.max(0,Math.min(20,y)),_.toString=function(){return t+""},_}return{format:h,formatPrefix:function(t,e){var n=h(((t=Lr(t)).type="f",t)),r=3*Math.max(-8,Math.min(8,Math.floor(Nr(e)/3))),i=Math.pow(10,-r),a=Wr[8+r/3];return function(t){return n(i*t)+a}}}}function Ir(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t)}return this}Fr=Xr({thousands:",",grouping:[3],currency:["$",""]}),Br=Fr.format,Dr=Fr.formatPrefix;const Hr=Symbol("implicit");function Yr(){var t=new N,e=[],n=[],r=Hr;function i(i){let a=t.get(i);if(void 0===a){if(r!==Hr)return r;t.set(i,a=e.push(i)-1)}return n[a%n.length]}return i.domain=function(n){if(!arguments.length)return e.slice();e=[],t=new N;for(const r of n)t.has(r)||t.set(r,e.push(r)-1);return i},i.range=function(t){return arguments.length?(n=Array.from(t),i):n.slice()},i.unknown=function(t){return arguments.length?(r=t,i):r},i.copy=function(){return Yr(e,n).unknown(r)},Ir.apply(i,arguments),i}function Ur(){var t,e,n=Yr().unknown(void 0),r=n.domain,i=n.range,a=0,o=1,l=!1,u=0,c=0,s=.5;function h(){var n=r().length,h=o<a,f=h?o:a,d=h?a:o;t=(d-f)/Math.max(1,n-u+2*c),l&&(t=Math.floor(t)),f+=(d-f-t*(n-u))*s,e=t*(1-u),l&&(f=Math.round(f),e=Math.round(e));var p=F(n).map((function(e){return f+t*e}));return i(h?p.reverse():p)}return delete n.unknown,n.domain=function(t){return arguments.length?(r(t),h()):r()},n.range=function(t){return arguments.length?([a,o]=t,a=+a,o=+o,h()):[a,o]},n.rangeRound=function(t){return[a,o]=t,a=+a,o=+o,l=!0,h()},n.bandwidth=function(){return e},n.step=function(){return t},n.round=function(t){return arguments.length?(l=!!t,h()):l},n.padding=function(t){return arguments.length?(u=Math.min(1,c=+t),h()):u},n.paddingInner=function(t){return arguments.length?(u=Math.min(1,t),h()):u},n.paddingOuter=function(t){return arguments.length?(c=+t,h()):c},n.align=function(t){return arguments.length?(s=Math.max(0,Math.min(1,t)),h()):s},n.copy=function(){return Ur(r(),[a,o]).round(l).paddingInner(u).paddingOuter(c).align(s)},Ir.apply(h(),arguments)}function Gr(t){var e=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,delete t.paddingOuter,t.copy=function(){return Gr(e())},t}function Kr(){return Gr(Ur.apply(null,arguments).paddingInner(1))}function Zr(t){return+t}var Qr=[0,1];function Jr(t){return t}function ti(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:(n=isNaN(e)?NaN:.5,function(){return n});var n}function ei(t,e,n){var r=t[0],i=t[1],a=e[0],o=e[1];return i<r?(r=ti(i,r),a=n(o,a)):(r=ti(r,i),a=n(a,o)),function(t){return a(r(t))}}function ni(t,e,n){var r=Math.min(t.length,e.length)-1,i=new Array(r),a=new Array(r),o=-1;for(t[r]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++o<r;)i[o]=ti(t[o],t[o+1]),a[o]=n(e[o],e[o+1]);return function(e){var n=j(t,e,1,r)-1;return a[n](i[n](e))}}function ri(){var t,e,n,r,i,a,o=Qr,l=Qr,u=gn,c=Jr;function s(){var t,e,n,u=Math.min(o.length,l.length);return c!==Jr&&(t=o[0],e=o[u-1],t>e&&(n=t,t=e,e=n),c=function(n){return Math.max(t,Math.min(e,n))}),r=u>2?ni:ei,i=a=null,h}function h(e){return null==e||isNaN(e=+e)?n:(i||(i=r(o.map(t),l,u)))(t(c(e)))}return h.invert=function(n){return c(e((a||(a=r(l,o.map(t),sn)))(n)))},h.domain=function(t){return arguments.length?(o=Array.from(t,Zr),s()):o.slice()},h.range=function(t){return arguments.length?(l=Array.from(t),s()):l.slice()},h.rangeRound=function(t){return l=Array.from(t),u=yn,s()},h.clamp=function(t){return arguments.length?(c=!!t||Jr,s()):c!==Jr},h.interpolate=function(t){return arguments.length?(u=t,s()):u},h.unknown=function(t){return arguments.length?(n=t,h):n},function(n,r){return t=n,e=r,s()}}function ii(t,e,n,r){var i,a=function(t,e,n){n=+n;const r=(e=+e)<(t=+t),i=r?O(e,t,n):O(t,e,n);return(r?-1:1)*(i<0?1/-i:i)}(t,e,n);switch((r=Lr(null==r?",f":r)).type){case"s":var o=Math.max(Math.abs(t),Math.abs(e));return null!=r.precision||isNaN(i=function(t,e){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(Nr(e)/3)))-Nr(Math.abs(t)))}(a,o))||(r.precision=i),Dr(r,o);case"":case"e":case"g":case"p":case"r":null!=r.precision||isNaN(i=function(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,Nr(e)-Nr(t))+1}(a,Math.max(Math.abs(t),Math.abs(e))))||(r.precision=i-("e"===r.type));break;case"f":case"%":null!=r.precision||isNaN(i=function(t){return Math.max(0,-Nr(Math.abs(t)))}(a))||(r.precision=i-2*("%"===r.type))}return Br(r)}function ai(t){var e=t.domain;return t.ticks=function(t){var n=e();return function(t,e,n){if(!((n=+n)>0))return[];if((t=+t)==(e=+e))return[t];const r=e<t,[i,a,o]=r?R(e,t,n):R(t,e,n);if(!(a>=i))return[];const l=a-i+1,u=new Array(l);if(r)if(o<0)for(let t=0;t<l;++t)u[t]=(a-t)/-o;else for(let t=0;t<l;++t)u[t]=(a-t)*o;else if(o<0)for(let t=0;t<l;++t)u[t]=(i+t)/-o;else for(let t=0;t<l;++t)u[t]=(i+t)*o;return u}(n[0],n[n.length-1],null==t?10:t)},t.tickFormat=function(t,n){var r=e();return ii(r[0],r[r.length-1],null==t?10:t,n)},t.nice=function(n){null==n&&(n=10);var r,i,a=e(),o=0,l=a.length-1,u=a[o],c=a[l],s=10;for(c<u&&(i=u,u=c,c=i,i=o,o=l,l=i);s-- >0;){if((i=O(u,c,n))===r)return a[o]=u,a[l]=c,e(a);if(i>0)u=Math.floor(u/i)*i,c=Math.ceil(c/i)*i;else{if(!(i<0))break;u=Math.ceil(u*i)/i,c=Math.floor(c*i)/i}r=i}return t},t}function oi(){var t=ri()(Jr,Jr);return t.copy=function(){return e=t,oi().domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown());var e},Ir.apply(t,arguments),ai(t)}var li=t=>()=>t;function ui(t,{sourceEvent:e,target:n,transform:r,dispatch:i}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:r,enumerable:!0,configurable:!0},_:{value:i}})}function ci(t,e,n){this.k=t,this.x=e,this.y=n}ci.prototype={constructor:ci,scale:function(t){return 1===t?this:new ci(this.k*t,this.x,this.y)},translate:function(t,e){return 0===t&0===e?this:new ci(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var si=new ci(1,0,0);function hi(t){t.stopImmediatePropagation()}function fi(t){t.preventDefault(),t.stopImmediatePropagation()}function di(t){return!(t.ctrlKey&&"wheel"!==t.type||t.button)}function pi(){var t=this;return t instanceof SVGElement?(t=t.ownerSVGElement||t).hasAttribute("viewBox")?[[(t=t.viewBox.baseVal).x,t.y],[t.x+t.width,t.y+t.height]]:[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]:[[0,0],[t.clientWidth,t.clientHeight]]}function gi(){return this.__zoom||si}function yi(t){return-t.deltaY*(1===t.deltaMode?.05:t.deltaMode?1:.002)*(t.ctrlKey?10:1)}function vi(){return navigator.maxTouchPoints||"ontouchstart"in this}function mi(t,e,n){var r=t.invertX(e[0][0])-n[0][0],i=t.invertX(e[1][0])-n[1][0],a=t.invertY(e[0][1])-n[0][1],o=t.invertY(e[1][1])-n[1][1];return t.translate(i>r?(r+i)/2:Math.min(0,r)||Math.max(0,i),o>a?(a+o)/2:Math.min(0,a)||Math.max(0,o))}function bi(){var t,e,n,r=di,i=pi,a=mi,o=yi,l=vi,u=[0,1/0],c=[[-1/0,-1/0],[1/0,1/0]],s=250,h=Cn,f=et("start","zoom","end"),d=500,p=150,g=0,y=10;function v(t){t.property("__zoom",gi).on("wheel.zoom",A,{passive:!1}).on("mousedown.zoom",M).on("dblclick.zoom",S).filter(l).on("touchstart.zoom",C).on("touchmove.zoom",E).on("touchend.zoom touchcancel.zoom",z).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function m(t,e){return(e=Math.max(u[0],Math.min(u[1],e)))===t.k?t:new ci(e,t.x,t.y)}function b(t,e,n){var r=e[0]-n[0]*t.k,i=e[1]-n[1]*t.k;return r===t.x&&i===t.y?t:new ci(t.k,r,i)}function w(t){return[(+t[0][0]+ +t[1][0])/2,(+t[0][1]+ +t[1][1])/2]}function x(t,e,n,r){t.on("start.zoom",(function(){k(this,arguments).event(r).start()})).on("interrupt.zoom end.zoom",(function(){k(this,arguments).event(r).end()})).tween("zoom",(function(){var t=this,a=arguments,o=k(t,a).event(r),l=i.apply(t,a),u=null==n?w(l):"function"==typeof n?n.apply(t,a):n,c=Math.max(l[1][0]-l[0][0],l[1][1]-l[0][1]),s=t.__zoom,f="function"==typeof e?e.apply(t,a):e,d=h(s.invert(u).concat(c/s.k),f.invert(u).concat(c/f.k));return function(t){if(1===t)t=f;else{var e=d(t),n=c/e[2];t=new ci(n,u[0]-e[0]*n,u[1]-e[1]*n)}o.zoom(null,t)}}))}function k(t,e,n){return!n&&t.__zooming||new _(t,e)}function _(t,e){this.that=t,this.args=e,this.active=0,this.sourceEvent=null,this.extent=i.apply(t,e),this.taps=0}function A(t,...e){if(r.apply(this,arguments)){var n=k(this,e).event(t),i=this.__zoom,l=Math.max(u[0],Math.min(u[1],i.k*Math.pow(2,o.apply(this,arguments)))),s=be(t);if(n.wheel)n.mouse[0][0]===s[0]&&n.mouse[0][1]===s[1]||(n.mouse[1]=i.invert(n.mouse[0]=s)),clearTimeout(n.wheel);else{if(i.k===l)return;n.mouse=[s,i.invert(s)],ir(this),n.start()}fi(t),n.wheel=setTimeout((function(){n.wheel=null,n.end()}),p),n.zoom("mouse",a(b(m(i,l),n.mouse[0],n.mouse[1]),n.extent,c))}}function M(t,...e){if(!n&&r.apply(this,arguments)){var i=t.currentTarget,o=k(this,e,!0).event(t),l=ve(t.view).on("mousemove.zoom",(function(t){if(fi(t),!o.moved){var e=t.clientX-s,n=t.clientY-h;o.moved=e*e+n*n>g}o.event(t).zoom("mouse",a(b(o.that.__zoom,o.mouse[0]=be(t,i),o.mouse[1]),o.extent,c))}),!0).on("mouseup.zoom",(function(t){l.on("mousemove.zoom mouseup.zoom",null),function(t,e){var n=t.document.documentElement,r=ve(t).on("dragstart.drag",null);e&&(r.on("click.drag",xe,we),setTimeout((function(){r.on("click.drag",null)}),0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}(t.view,o.moved),fi(t),o.event(t).end()}),!0),u=be(t,i),s=t.clientX,h=t.clientY;!function(t){var e=t.document.documentElement,n=ve(t).on("dragstart.drag",xe,we);"onselectstart"in e?n.on("selectstart.drag",xe,we):(e.__noselect=e.style.MozUserSelect,e.style.MozUserSelect="none")}(t.view),hi(t),o.mouse=[u,this.__zoom.invert(u)],ir(this),o.start()}}function S(t,...e){if(r.apply(this,arguments)){var n=this.__zoom,o=be(t.changedTouches?t.changedTouches[0]:t,this),l=n.invert(o),u=n.k*(t.shiftKey?.5:2),h=a(b(m(n,u),o,l),i.apply(this,e),c);fi(t),s>0?ve(this).transition().duration(s).call(x,h,o,t):ve(this).call(v.transform,h,o,t)}}function C(n,...i){if(r.apply(this,arguments)){var a,o,l,u,c=n.touches,s=c.length,h=k(this,i,n.changedTouches.length===s).event(n);for(hi(n),o=0;o<s;++o)u=[u=be(l=c[o],this),this.__zoom.invert(u),l.identifier],h.touch0?h.touch1||h.touch0[2]===u[2]||(h.touch1=u,h.taps=0):(h.touch0=u,a=!0,h.taps=1+!!t);t&&(t=clearTimeout(t)),a&&(h.taps<2&&(e=u[0],t=setTimeout((function(){t=null}),d)),ir(this),h.start())}}function E(t,...e){if(this.__zooming){var n,r,i,o,l=k(this,e).event(t),u=t.changedTouches,s=u.length;for(fi(t),n=0;n<s;++n)i=be(r=u[n],this),l.touch0&&l.touch0[2]===r.identifier?l.touch0[0]=i:l.touch1&&l.touch1[2]===r.identifier&&(l.touch1[0]=i);if(r=l.that.__zoom,l.touch1){var h=l.touch0[0],f=l.touch0[1],d=l.touch1[0],p=l.touch1[1],g=(g=d[0]-h[0])*g+(g=d[1]-h[1])*g,y=(y=p[0]-f[0])*y+(y=p[1]-f[1])*y;r=m(r,Math.sqrt(g/y)),i=[(h[0]+d[0])/2,(h[1]+d[1])/2],o=[(f[0]+p[0])/2,(f[1]+p[1])/2]}else{if(!l.touch0)return;i=l.touch0[0],o=l.touch0[1]}l.zoom("touch",a(b(r,i,o),l.extent,c))}}function z(t,...r){if(this.__zooming){var i,a,o=k(this,r).event(t),l=t.changedTouches,u=l.length;for(hi(t),n&&clearTimeout(n),n=setTimeout((function(){n=null}),d),i=0;i<u;++i)a=l[i],o.touch0&&o.touch0[2]===a.identifier?delete o.touch0:o.touch1&&o.touch1[2]===a.identifier&&delete o.touch1;if(o.touch1&&!o.touch0&&(o.touch0=o.touch1,delete o.touch1),o.touch0)o.touch0[1]=this.__zoom.invert(o.touch0[0]);else if(o.end(),2===o.taps&&(a=be(a,this),Math.hypot(e[0]-a[0],e[1]-a[1])<y)){var c=ve(this).on("dblclick.zoom");c&&c.apply(this,arguments)}}}return v.transform=function(t,e,n,r){var i=t.selection?t.selection():t;i.property("__zoom",gi),t!==i?x(t,e,n,r):i.interrupt().each((function(){k(this,arguments).event(r).start().zoom(null,"function"==typeof e?e.apply(this,arguments):e).end()}))},v.scaleBy=function(t,e,n,r){v.scaleTo(t,(function(){return this.__zoom.k*("function"==typeof e?e.apply(this,arguments):e)}),n,r)},v.scaleTo=function(t,e,n,r){v.transform(t,(function(){var t=i.apply(this,arguments),r=this.__zoom,o=null==n?w(t):"function"==typeof n?n.apply(this,arguments):n,l=r.invert(o),u="function"==typeof e?e.apply(this,arguments):e;return a(b(m(r,u),o,l),t,c)}),n,r)},v.translateBy=function(t,e,n,r){v.transform(t,(function(){return a(this.__zoom.translate("function"==typeof e?e.apply(this,arguments):e,"function"==typeof n?n.apply(this,arguments):n),i.apply(this,arguments),c)}),null,r)},v.translateTo=function(t,e,n,r,o){v.transform(t,(function(){var t=i.apply(this,arguments),o=this.__zoom,l=null==r?w(t):"function"==typeof r?r.apply(this,arguments):r;return a(si.translate(l[0],l[1]).scale(o.k).translate("function"==typeof e?-e.apply(this,arguments):-e,"function"==typeof n?-n.apply(this,arguments):-n),t,c)}),r,o)},_.prototype={event:function(t){return t&&(this.sourceEvent=t),this},start:function(){return 1==++this.active&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(t,e){return this.mouse&&"mouse"!==t&&(this.mouse[1]=e.invert(this.mouse[0])),this.touch0&&"touch"!==t&&(this.touch0[1]=e.invert(this.touch0[0])),this.touch1&&"touch"!==t&&(this.touch1[1]=e.invert(this.touch1[0])),this.that.__zoom=e,this.emit("zoom"),this},end:function(){return 0==--this.active&&(delete this.that.__zooming,this.emit("end")),this},emit:function(t){var e=ve(this.that).datum();f.call(t,this.that,new ui(t,{sourceEvent:this.sourceEvent,target:v,type:t,transform:this.that.__zoom,dispatch:f}),e)}},v.wheelDelta=function(t){return arguments.length?(o="function"==typeof t?t:li(+t),v):o},v.filter=function(t){return arguments.length?(r="function"==typeof t?t:li(!!t),v):r},v.touchable=function(t){return arguments.length?(l="function"==typeof t?t:li(!!t),v):l},v.extent=function(t){return arguments.length?(i="function"==typeof t?t:li([[+t[0][0],+t[0][1]],[+t[1][0],+t[1][1]]]),v):i},v.scaleExtent=function(t){return arguments.length?(u[0]=+t[0],u[1]=+t[1],v):[u[0],u[1]]},v.translateExtent=function(t){return arguments.length?(c[0][0]=+t[0][0],c[1][0]=+t[1][0],c[0][1]=+t[0][1],c[1][1]=+t[1][1],v):[[c[0][0],c[0][1]],[c[1][0],c[1][1]]]},v.constrain=function(t){return arguments.length?(a=t,v):a},v.duration=function(t){return arguments.length?(s=+t,v):s},v.interpolate=function(t){return arguments.length?(h=t,v):h},v.on=function(){var t=f.on.apply(f,arguments);return t===f?v:t},v.clickDistance=function(t){return arguments.length?(g=(t=+t)*t,v):Math.sqrt(g)},v.tapDistance=function(t){return arguments.length?(y=+t,v):y},v}ci.prototype;var wi=function(){return wi=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},wi.apply(this,arguments)};function xi(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,a=n.call(t),o=[];try{for(;(void 0===e||e-- >0)&&!(r=a.next()).done;)o.push(r.value)}catch(t){i={error:t}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(i)throw i.error}}return o}function ki(t,e,n){if(n||2===arguments.length)for(var r,i=0,a=e.length;i<a;i++)!r&&i in e||(r||(r=Array.prototype.slice.call(e,0,i)),r[i]=e[i]);return t.concat(r||Array.prototype.slice.call(e))}function _i(t,e){return void 0===e&&(e=0),wi(wi({},p(t,e)),u(t,e))}function Ai(t,e,n){return void 0===n&&(n=.001),g(t,e,n)&&c(t,e,n)}function Mi(t){return wi(wi({},Ei(t)),{width:0,height:0})}function Si(t,e){return{x:t.x+e/2,y:t.y+e/2,width:Math.max(0,t.width-e),height:Math.max(0,t.height-e)}}function Ci(t,e){return{x:t.x+t.width*e.x,y:t.y+t.height*e.y}}function Ei(t){return Ci(t,{x:.5,y:.5})}function zi(t){return Ci(t,{x:.5,y:0})}function ji(t){return Ci(t,{x:.5,y:1})}function Ni(t){return Ci(t,{x:0,y:.5})}function Vi(t){return Ci(t,{x:1,y:.5})}function $i(t){return Ci(t,{x:0,y:1})}function Li(t){return Ci(t,{x:1,y:1})}function Ti(t){return Ci(t,{x:1,y:0})}function Pi(t){return Ci(t,{x:0,y:0})}function Ri(t,e){return void 0===e&&(e=0),"".concat(y(t,e),", ").concat(s(t,e))}function Oi(t){var e=t.split(",").map((function(t){return parseFloat(t.trim())}));return{x:e[0],y:e[1],width:e[2],height:e[3]}}function Fi(t,e){t.call((function(t){var n=p(e),r=n.x,i=n.y,a=u(e),o=a.width,l=a.height;t.attr("viewbox","".concat(r,", ").concat(i,", ").concat(o,", ").concat(l))}))}function Bi(t,e){t.call((function(t){return m(t,e)})).call((function(t){return f(t,e)}))}function Di(t){return wi(wi({},b(t)),d(t))}function qi(t){return wi({x:0,y:0},t)}function Wi(t){console.assert(t.isConnected,"Element needs to be attached to the DOM.");var e=t.getBoundingClientRect(),n=t.parentElement.getBoundingClientRect();return _i({x:e.x-n.x,y:e.y-n.y,width:e.width,height:e.height},2)}function Xi(t,e){var n=document.createElement("style-dummy-tag");t.parentElement.appendChild(n);var r=window.getComputedStyle(n),i=window.getComputedStyle(t),a={};return e.forEach((function(t){var e=r.getPropertyValue(t),n=i.getPropertyValue(t);"overflow"!==t&&e===n||(a[t]=n)})),n.remove(),a}function Ii(t){return ve(t).datum()}function Hi(t){return t instanceof Element||t instanceof HTMLElement||t instanceof SVGElement}var Yi=["fill","alignment-baseline","baseline-shift","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-rendering","cursor","direction","display","dominant-baseline","fill-opacity","fill-rule","filter","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","glyph-orientation-horizontal","glyph-orientation-vertical","image-rendering","letter-spacing","lighting-color","marker-end","marker-mid","marker-start","mask","opacity","overflow","paint-order","pointer-events","shape-rendering","stop-color","stop-opacity","stroke","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","text-anchor","text-decoration","text-overflow","text-rendering","unicode-bidi","vector-effect","visibility","white-space","word-spacing","writing-mode","transform"];function Ui(t,e){void 0===e&&(e=0);var n=Math.pow(10,e);return{center:p(t.center,e),radius:Math.round(t.radius*n)/n}}function Gi(t,e,n){return void 0===n&&(n=.001),g(t.center,e.center,n)&&Math.abs(t.radius-e.radius)<n}function Ki(t,e){return void 0===e&&(e=1),t=Ui(t,e),"".concat(t.center.x,", ").concat(t.center.y,", ").concat(t.radius)}function Zi(t){var e=t.split(",").map((function(t){return parseFloat(t.trim())}));return{center:{x:e[0],y:e[1]},radius:e[2]}}function Qi(t,e){t.attr("cx",e.center.x),t.attr("cy",e.center.y),t.attr("r",e.radius),t.attr("fill",e.color?e.color:null)}function Ji(t){var e=t.selection();return{center:{x:parseFloat(e.attr("cx")||"0"),y:parseFloat(e.attr("cy")||"0")},radius:parseFloat(e.attr("r")||"0")}}function ta(t){return{center:t.center,radius:0}}function ea(t,e){return{center:t.center,radius:t.radius-e/2}}function na(t,e,n){void 0===n&&(n=1);var r=e*Math.PI/180;return{x:t.center.x+t.radius*Math.cos(r)*n,y:t.center.y+t.radius*Math.sin(r)*n}}function ra(t){return{center:Ei(t),radius:Math.min(t.width,t.height)/2}}function ia(t){return{center:Ei(t),radius:Math.sqrt(Math.pow(t.width,2)+Math.pow(t.height,2))/2}}function aa(t,e){var n=e.x,r=e.y,i=e.width,a=e.height;(t=Hi(t)?ve(t):t).attr("d","M ".concat(n," ").concat(r," h ").concat(i," v ").concat(a," h ").concat(-i," v ").concat(-a))}function oa(t,e){var n=e.center,r=n.x,i=n.y,a=e.radius;(t=Hi(t)?ve(t):t).attr("d","M ".concat(r-a," ").concat(i," \n    a ").concat(a,",").concat(a," 0 1,0 ").concat(2*a,",0 \n    a ").concat(a,",").concat(a," 0 1,0 -").concat(2*a,",0"))}function la(t,e){e.length<2||(t=Hi(t)?ve(t):t).attr("d","M".concat(e.map((function(t){return"".concat(t.x,",").concat(t.y)})).join("L")))}function ua(t){return function(e){return 0===e?"0":t(e)}}var ca=/(\d+(?:\.\d+)?)(px|rem)/;function sa(t,e){var n,r;try{for(var i=function(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}(e.entries()),a=i.next();!a.done;a=i.next()){var o=xi(a.value,2),l=o[0];if(ha(t,o[1]))return l}}catch(t){n={error:t}}finally{try{a&&!a.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}return-1}function ha(t,e){var n,r,i,a,o=t.getBoundingClientRect(),l=o.width,u=o.height,c=null===(n=e.minWidth)||void 0===n?void 0:n.match(ca);if(c){var s=xi(c,3);if(fa(t,s[1],s[2])>l)return!1}var h=null===(r=e.minHeight)||void 0===r?void 0:r.match(ca);if(h){var f=xi(h,3);if(fa(t,f[1],f[2])>u)return!1}var d=null===(i=e.maxWidth)||void 0===i?void 0:i.match(ca);if(d){var p=xi(d,3);if(fa(t,p[1],p[2])<l)return!1}var g=null===(a=e.maxHeight)||void 0===a?void 0:a.match(ca);if(g){var y=xi(g,3);if(fa(t,y[1],y[2])<u)return!1}return!0}function fa(t,e,n){if("px"===n)return e;if("rem"===n)return e*parseFloat(getComputedStyle(document.documentElement).fontSize);if("em"===n)return e*parseFloat(getComputedStyle(t).fontSize);throw new Error("Invalid unit: ".concat(n))}function da(t){return t.join}function pa(t){return!da(t)}function ga(t){t.each((function(t,e,n){var r=function(t){return"true"===t.trim()},i=window.getComputedStyle(n[e]),a=r(i.getPropertyValue("--fit-width")),o=r(i.getPropertyValue("--fit-height")),l="";if(a||o){var u=t.getBoundingClientRect();a&&(l+="width: ".concat(u.width,"px; ")),o&&(l+="height: ".concat(u.height,"px; "))}n[e].setAttribute("style",l)}))}function ya(t){t.attr("class",(function(t){return t.getAttribute("class")})).each((function(t,e,n){return ve(n[e]).classed(t.tagName,!0)})).classed("layout",!0)}function va(t){t.each((function(t,e,n){var r=n[e],i=function(t){return Array.from(t).filter((function(t){return t.name.startsWith("data-")})).reduce((function(t,e){var n;return Object.assign(t,((n={})["".concat(e.name)]=e.value,n))}),{})},a=i(r.attributes),o=i(t.attributes);Object.keys(a).filter((function(t){return void 0!==o[t]})).forEach((function(t){return r.removeAttribute(t)})),Object.keys(o).forEach((function(t){return r.setAttribute(t,o[t])}))}))}function ma(t){return t.selectChildren(".layout").data((function(t){return ba(t)})).join("div")}function ba(t){return ve(t).filter(":not([data-ignore-layout-children])").selectChildren(":not([data-ignore-layout]):not(.layout)").nodes()}function wa(t){t.classed("layouter",!0)}function xa(t){t.each((function(){for(var t,e=ve(this),n=ve(t=this).selectChildren(".layout").data(ba(t)).join("div"),r=n;!r.empty();)ya(r),ga(r),va(r),r=ma(r);var i=!1;if(e.selectAll(".layout").each((function(){var t=function(t){var e=!1;return t.each((function(t){var n=ve(t),r=Oi(n.attr("bounds")||"0, 0, 0, 0"),i=Wi(this),a=!Ai(r,i,.1);if(e=e||a,a)switch(n.attr("bounds",Ri(i)),t.tagName){case"svg":case"rect":n.call((function(t){return Bi(t,i)}));break;case"circle":n.call((function(t){return Qi(t,ra(i))}));break;case"line":var o=$i(i),l=Ti(i);n.attr("x1",o.x).attr("y1",o.y).attr("x2",l.x).attr("y2",l.y);break;default:n.call((function(t){return w(t,i)}))}})),e}(ve(this));i=i||t})),i){var a=Oi(ve(n.datum()).attr("bounds"));n.style("left",a.x).style("top",a.y).attr("x",null).attr("y",null).attr("width",null).attr("height",null).attr("viewBox",Ri(wi(wi({},a),{x:0,y:0}))),e.dispatch("boundschange")}}))}var ka,_a,Aa,Ma,Sa=new ResizeObserver((function(t){t.forEach((function(t){return ve(t.target).dispatch("resize",{detail:{bounds:t.target.getBoundingClientRect()}})}))}));function Ca(t){t.each((function(t,e,n){return Sa.observe(n[e])}))}function Ea(t){var e=oi().domain([0,1]);if(t.length>0)if("number"==typeof t[0]){var n=[Math.min.apply(Math,ki([],xi(t),!1)),Math.max.apply(Math,ki([],xi(t),!1))],r=n[1]-n[0],i=[n[0]-.05*r,n[1]+.05*r];e=oi().domain(i).nice()}else e=Kr().domain(t);return e}function za(t){return{scale:t.scale||oi().domain([0,1]).range([0,600]),title:t.title||"",subtitle:t.subtitle||"",configureAxis:t.configureAxis||function(){},tickOrientation:t.tickOrientation}}function ja(t){t.classed("axis axis-left",!0).each((function(t,e,n){return $a(ve(n[e]),La(J,t),t)}))}function Na(t){t.classed("axis axis-bottom",!0).each((function(t,e,n){return $a(ve(n[e]),La(Q,t),t)}))}function Va(t){t.classed("axis axis-sequence",!0).each((function(t,e,n){return $a(ve(n[e]),La(J,t),t)}))}function $a(t,e,n){t.selectAll(".title").data([null]).join("g").classed("title",!0).attr("data-ignore-layout-children",!0).selectAll("text").data([null]).join("text").text(n.title),t.selectAll(".subtitle").data([null]).join("g").classed("subtitle",!0).attr("data-ignore-layout-children",!0).selectAll("text").data([null]).join("text").text(n.subtitle);var r=t.selectAll(".ticks-transform").data([null]).join("g").classed("ticks-transform",!0).selectAll(".ticks").data([null]).join("g").classed("ticks",!0).attr("data-ignore-layout-children",!0);e(r),r.attr("fill",null).attr("font-family",null).attr("font-size",null).attr("text-anchor",null),r.selectAll(".tick").attr("opacity",null).attr("data-key",(function(t){return t})),r.selectAll(".tick").selectAll(".pivot").data([null]).join("g").classed("pivot",!0);var i=function(){var e,r,i=n.tickOrientation,a=null!==(r=null===(e=n.tickOrientation)||void 0===e?void 0:e.boundElement)&&void 0!==r?r:t.select(".domain").node();if(!i||!a)return;var o=function(t,e){function n(e){var n,r=null===(n=e.minWidth)||void 0===n?void 0:n.match(ca);if(!r)return 0;var i=xi(r,3),a=i[1],o=i[2];return fa(t,a,o)}var r=sa(t,e.bounds),i=r>=0?r:e.orientation.length-1,a="clockwise"===e.rotationDirection?90:-90;if("horizontal"===e.orientation[i])return 0;if("vertical"===e.orientation[i])return a;var o=n(e.bounds[r-1]),l=n(e.bounds[r]),u=(o-t.getBoundingClientRect().width)/(o-l);return"vertical"===e.orientation[r-1]?a-u*a:u*a}(a,i),l=sa(a,i.bounds),u=l>=0?l:i.orientation.length-1;return{angle:o,boundIndex:l,orientationIndex:u}}();r.selectAll(".tick").each((function(e,r,a){!function(e){var r,a=e.select("text"),o=a.attr("x")||"0",l=a.attr("y")||"0";a.attr("x",null).attr("y",null);var u=e.select(".pivot");if(u.append((function(){return a.node()})),!i||!n.tickOrientation||!t.classed("axis-bottom"))return void u.attr("transform","translate(".concat(o,", ").concat(l,")"));var c=i.angle>15?"clockwise":i.angle<-15?"counterclockwise":"none";a.attr("angle","none"!==c?null===(r=n.tickOrientation)||void 0===r?void 0:r.orientation[i.orientationIndex]:"horizontal").style("text-anchor","clockwise"===c?"start":"counterclockwise"===c?"end":"middle").style("dominant-baseline","none"!==c?"central":"hanging"),u.attr("transform","translate("+o+","+l+") rotate("+i.angle+")")}(ve(a[r]))})),r.selectAll(".tick line").attr("stroke",null),r.selectAll(".tick text").attr("fill",null).attr("dx",null).attr("dy",null),r.selectAll(".domain").attr("stroke",null).attr("fill",null)}function La(t,e){var n=t(e.scale);return e.configureAxis(n),n}function Ta(t){t.classed("chart",!0).attr("xmlns","http://www.w3.org/2000/svg"),t.selectAll(".draw-area").data([null]).join("svg").classed("draw-area",!0).selectAll(".background").data([null]).join("rect").classed("background",!0);var e=t.selectAll(".header").data((function(t){return[t]})).join("g").classed("header",!0);return e.selectAll(".title").data((function(t){return[t.title?t.title:""]})).join("g").classed("title",!0).attr("data-ignore-layout-children",!0).selectAll("text").data((function(t){return[t]})).join("text").text((function(t){return t})),e.selectAll(".subtitle").data((function(t){return[t.subtitle?t.subtitle:""]})).join("g").classed("subtitle",!0).attr("data-ignore-layout-children",!0).selectAll("text").data((function(t){return[t]})).join("text").text((function(t){return t})),t}function Pa(t){t.classed("menu",!0),t.selectChildren(".chevron").data([null]).join("span").text("❮").classed("chevron",!0),t.selectChildren(".text").data([null]).join("span").classed("text",!0),t.selectChildren(".items").data([null]).join("ul").classed("items",!0)}function Ra(t){t.classed("chart-window",!0),t.selectAll(".toolbar").data([null]).join("div").call((function(t){return Oa(t)})),t.selectAll(".layouter").data([null]).join("div").call((function(t){return wa(t)})),Ca(t)}function Oa(t){t.classed("toolbar",!0),t.selectAll(".menu-tools").data([null]).join("div").call((function(t){return Fa(t)}))}function Fa(t){t.call((function(t){return Pa(t)})).classed("menu-tools",!0),t.selectChildren(".chevron").remove(),t.selectChildren(".text").text("☰")}function Ba(t){return{title:t.title||"",subtitle:t.subtitle||"",xAxis:za(t.xAxis||{}),yAxis:za(t.yAxis||{}),flipped:t.flipped||!1}}function Da(t){t.classed("chart-cartesian",!0).each((function(t,e,n){var r=t.flipped,i=t.xAxis,a=t.yAxis,o=ve(n[e]),l=r||!1;o.selectAll(".axis-left").data([r?i:a]).join("g").call((function(t){return ja(t)})).classed("axis-x",l).classed("axis-y",!r),o.selectAll(".axis-bottom").data([r?a:i]).join("g").call((function(t){return Na(t)})).classed("axis-x",!r).classed("axis-y",l)})).attr("data-flipped",(function(t){return!!t.flipped&&t.flipped}))}function qa(t,e){t.attr("data-legend-position",e)}function Wa(t,e){t.attr("data-align-v",e)}function Xa(t,e){t.attr("data-align-h",e)}function Ia(t,e){t.attr("data-orientation",e)}function Ha(t){var e=t.labels||[];return{container:t.container||"div",labels:e,keys:t.keys||e}}function Ya(t){var e=t.labels,n=t.container,r=t.keys;return e.map((function(t,e){return{container:n,label:t,key:r[e]}}))}function Ua(t){t.classed("series-checkbox",!0).on("click.seriescheckbox",(function(t){return t.target.classList.contains("checkbox")&&t.target.querySelector("input").click()})).each((function(t,e,n){var r=ve(n[e]);r.selectAll(".checkbox").data(Ya(t),(function(t){return t.label})).call((function(t){return Ga(r,t)}))}))}function Ga(t,e){e.join((function(e){return e.append((function(t,e,n){return t.container instanceof Function?t.container.call(n[e],t,e,n):me(t.container).node()})).classed("checkbox",!0).each((function(t,e,n){var r=ve(n[e]),i=l();r.append("input").attr("type","checkbox").attr("id",i).attr("checked",!0),r.append("label").attr("for",i)})).call((function(e){return t.dispatch("enter",{detail:{selection:e}})}))}),void 0,(function(e){return e.remove().call((function(e){return t.dispatch("exit",{detail:{selection:e}})}))})).each((function(t,e,n){ve(n[e]).attr("data-key",t.key).selectChildren("label").text(t.label)})).call((function(e){return t.dispatch("update",{detail:{selection:e}})}))}function Ka(t){t.classed("tool-download-svg",!0).text("Download SVG").on("click",(function(){ve(this.closest(".chart-window")).selectAll(".layouter > svg.chart").call((function(t){return Za(t,"chart.svg")}))}))}function Za(t,e){t.each((function(t,n,r){var i=r[n].cloneNode(!0),a=i.getAttribute("width"),o=i.getAttribute("height");i.setAttribute("viewBox","0, 0, ".concat(a,", ").concat(o)),i.removeAttribute("width"),i.removeAttribute("height"),i.removeAttribute("x"),i.removeAttribute("y"),Qa(i,r[n]);var l=document.createElement("div");l.append(i);var u=l.innerHTML.replace(/ (style|layout|bounds|data-ignore-layout|data-ignore-layout-children)=".*?"/g,""),c=new Blob([u],{type:"image/svg+xml;charset=utf-8"}),s=URL.createObjectURL(c),h=document.createElement("a");e=e instanceof Function?e.call(r[n],t,n,r):e,h.href=s,h.download=e,document.body.appendChild(h),h.click(),document.body.removeChild(h)}))}function Qa(t,e){var n=Xi(e,Yi);for(var r in n)t.setAttribute(r,n[r]);for(var i=0;i<e.children.length;++i)Qa(t.children[i],e.children[i])}function Ja(t){var e=t.options||[];return{text:t.text||"Filter",options:e,keys:t.keys||e}}function to(t){t.classed("tool-filter-nominal",!0).call((function(t){return Pa(t)})),t.each((function(t,e,n){var r=ve(n[e]);r.selectAll(".text").text(t.text),r.selectAll(".items").datum(Ha({container:function(){return me("li").node()},labels:t.options,keys:t.keys})).call((function(t){return Ua(t)}))}))}function eo(t){t.classed("tooltip",!0)}function no(){var t=ve(".tooltip");return t.size()>0?t:ve(document.body).append("div").call((function(t){return eo(t)}))}function ro(t){(t=t||no()).classed("show",!0)}function io(t){(t=t||no()).classed("show",!1)}function ao(t,e){(t=t||no()).html(e)}function oo(t,e){var n=e.position,r=e.offset,i=e.offsetDirection;t=t||no(),r=r||8;var a=window.innerWidth,o=window.innerHeight,l=(i=e.offsetDirection||{x:n.x<=a/2?1:-1,y:n.y<=o/2?1:-1}).x>=0,u=i.y>=0,c=n.x+i.x*r,s=a-c,h=n.y+i.y*r,f=o-h;t.style(l?"right":"left",null).style(l?"left":"right","".concat(l?c:s,"px")).style(u?"bottom":"top",null).style(u?"top":"bottom","".concat(u?h:f,"px"))}function lo(t){var e;return{tooltipsEnabled:null===(e=t.tooltipsEnabled)||void 0===e||e,tooltips:t.tooltips||function(t){return"Tooltip"},tooltipPosition:t.tooltipPosition||function(t,e,n){return{position:n}}}}function uo(t,e){t.on("pointerover.tooltip",(function(t,n){var r=n.tooltips,i=n.tooltipsEnabled,a=e?e(t.target):t.target;if(i&&a){var o=ve(a).datum();ro(null),ao(null,r(a,o))}})).on("pointermove.tooltip",(function(t,n){var r=n.tooltipsEnabled,i=n.tooltipPosition,a=e?e(t.target):t.target;r&&a&&oo(null,i(a,ve(a).datum(),{x:t.clientX,y:t.clientY}))})).on("pointerout.tooltip",(function(t,e){e.tooltipsEnabled&&io(null)}))}!function(t){t.Top="top",t.Right="right",t.Bottom="bottom",t.Left="left"}(ka||(ka={})),function(t){t.Horizontal="horizontal",t.Vertical="vertical"}(_a||(_a={})),function(t){t.Top="top",t.Center="center",t.Bottom="bottom"}(Aa||(Aa={})),function(t){t.Left="left",t.Center="center",t.Right="right"}(Ma||(Ma={}));var co,so=function(t,e){e||(e=[0,""]),t=String(t);var n=parseFloat(t,10);return e[0]=n,e[1]=t.match(/[\d.\-\+]*\s*(.*)/)[1]||"",e},ho=yo,fo=go("in",document.body);function po(t,e){var n=so(getComputedStyle(t).getPropertyValue(e));return n[0]*yo(n[1],t)}function go(t,e){var n=document.createElement("div");n.style.height="128"+t,e.appendChild(n);var r=po(n,"height")/128;return e.removeChild(n),r}function yo(t,e){if(!t)return null;switch(e=e||document.body,t=(t+""||"px").trim().toLowerCase(),e!==window&&e!==document||(e=document.body),t){case"%":return e.clientHeight/100;case"ch":case"ex":return go(t,e);case"em":return po(e,"font-size");case"rem":return po(document.body,"font-size");case"vw":return window.innerWidth/100;case"vh":return window.innerHeight/100;case"vmin":return Math.min(window.innerWidth,window.innerHeight)/100;case"vmax":return Math.max(window.innerWidth,window.innerHeight)/100;case"in":return fo;case"cm":return fo/2.54;case"mm":return fo/25.4;case"pt":return fo/72;case"pc":return fo/6;case"px":return 1}var n=so(t);if(!isNaN(n[0])&&n[1]){var r=yo(n[1],e);return"number"==typeof r?n[0]*r:null}return null}function vo(t){var e=t.categories||[];return wi(wi({bounds:t.bounds||{width:600,height:400},categories:e,styleClasses:t.styleClasses||"categorical-0",categoryScale:t.categoryScale||Ur().domain(e).padding(.1),values:t.values||[],valueScale:t.valueScale||oi().domain([0,Math.max.apply(Math,ki([],xi(t.values||[]),!1))]).nice(),flipped:t.flipped||!1,keys:t.keys||e},lo(t)),{tooltipsEnabled:t.tooltipsEnabled||!0,tooltips:t.tooltips||function(t,e){return"Category: ".concat(e.category,"<br/>Value: ").concat(e.value)}})}function mo(t){var e=t.categories,n=t.categoryScale,r=t.values,i=t.valueScale,a=t.keys,o=t.styleClasses,l=t.flipped,u=t.bounds;l?(n.range([0,u.height]),i.range([0,u.width])):(n.range([0,u.width]),i.range([u.height,0]));for(var c=[],s=0;s<r.length;++s){var h=e[s],f=r[s],d={x:n(h),y:Math.min(i(0),i(f)),width:n.bandwidth(),height:Math.abs(i(0)-i(f))},p={x:Math.min(i(0),i(f)),y:n(h),width:Math.abs(i(0)-i(f)),height:n.bandwidth()},g=wi({category:h,value:f,key:a[s],styleClass:k(o)?o[s]:o},l?p:d);c.push(g)}return c}function bo(t){t.classed("series-bar",!0).attr("data-ignore-layout-children",!0).each((function(t,e,n){var r=ve(n[e]),i=r.attr("bounds");i&&(t.bounds=Oi(i),r.selectAll("rect").data(mo(t),(function(t){return t.key})).call((function(t){return wo(r,t)})))})).on("pointerover.seriesbarhighlight pointerout.seriesbarhighlight",(function(t){return t.target.classList.toggle("highlight",t.type.endsWith("over"))})).call((function(t){return uo(t)}))}function wo(t,e){e.join((function(e){return e.append("rect").classed("bar",!0).each((function(t,e,n){return Bi(ve(n[e]),Mi(t))})).call((function(e){return t.dispatch("enter",{detail:{selection:e}})}))}),void 0,(function(e){return e.classed("exiting",!0).each((function(t,e,n){return ve(n[e]).transition("minimize").duration(250).call((function(e){return Bi(e,Mi(t))})).remove()})).call((function(e){return t.dispatch("exit",{detail:{selection:e}})}))})).each((function(t,e,n){return ve(n[e]).transition("position").duration(250).ease(Cr).call((function(r){return Bi(r,Si(t,ho(ve(n[e]).style("stroke-width"))))}))})).attr("data-style",(function(t){return t.styleClass})).attr("data-category",(function(t){return t.category})).attr("data-key",(function(t){return t.key})).call((function(e){return t.dispatch("update",{detail:{selection:e}})}))}function xo(t){var e,n=t.categories||[],r=t.subcategories||[];return wi(wi({categories:n,categoryScale:t.categoryScale||Ur().domain(t.categories||[]).padding(.1),values:t.values||[],valueScale:t.valueScale||oi().domain([0,Math.max.apply(Math,ki([],xi((null===(e=t.values)||void 0===e?void 0:e.map((function(t){return Math.max.apply(Math,ki([],xi(t),!1))})))||[]),!1))]).nice(),subcategories:r,flipped:t.flipped||!1,subcategoryPadding:t.subcategoryPadding||.1,styleClasses:t.styleClasses||r.map((function(t,e){return"categorical-".concat(e)})),keys:t.keys||n.map((function(t){return r.map((function(e){return"".concat(t,"/").concat(e)}))})),bounds:t.bounds||{width:600,height:400}},lo(t)),{tooltipsEnabled:t.tooltipsEnabled||!0,tooltips:t.tooltips||function(t,e){return"Category: ".concat(e.category,"<br/>Subcategory: ").concat(e.subcategory,"<br/>Value: ").concat(e.value)}})}function ko(t){var e,n=t.categories,r=t.categoryScale,i=t.values,a=t.valueScale,o=t.subcategories,l=t.flipped,u=t.subcategoryPadding,c=t.styleClasses,s=t.keys,h=t.bounds;l?(r.range([0,h.height]),a.range([0,h.width])):(r.range([0,h.width]),a.range([h.height,0]));for(var f=Ur().domain(F((null===(e=i[0])||void 0===e?void 0:e.length)||0)).range([0,r.bandwidth()]).padding(u),d=[],p=0;p<i.length;++p)for(var g=i[p],y=0;y<g.length;++y){var v=n[p],m=g[y],b={x:r(v)+f(y),y:Math.min(a(0),a(m)),width:f.bandwidth(),height:Math.abs(a(0)-a(m))},w={x:Math.min(a(0),a(m)),y:r(v)+f(y),width:Math.abs(a(0)-a(m)),height:f.bandwidth()},x=wi({category:v,subcategory:o[y],value:m,styleClass:_(c)?c[p][y]:k(c)?c[y]:c,key:s[p][y]},l?w:b);d.push(x)}return d}function _o(t){t.classed("series-bar",!0).classed("series-bar-grouped",!0).attr("data-ignore-layout-children",!0).on("update.subcategory",(function(t){return t.detail.selection.attr("data-subcategory",(function(t){return t.subcategory}))})).each((function(t,e,n){var r=ve(n[e]),i=r.attr("bounds");i&&(t.bounds=Oi(i),r.selectAll("rect").data(ko(t),(function(t){return t.key})).call((function(t){return wo(r,t)})))})).on("pointerover.seriesbargroupedhighlight pointerout.seriesbargroupedhighlight",(function(t){return t.target.classList.toggle("highlight",t.type.endsWith("over"))})).call((function(t){return uo(t)}))}function Ao(t){var e,n=t.categories||[],r=t.subcategories||[];return wi(wi({categories:n,categoryScale:t.categoryScale||Ur().domain(t.categories||[]).padding(.1),values:t.values||[],valueScale:t.valueScale||oi().domain([0,Math.max.apply(Math,ki([],xi((null===(e=t.values)||void 0===e?void 0:e.map((function(t){return t.reduce((function(t,e){return t+e}))})))||[]),!1))]).nice(),subcategories:r,styleClasses:t.styleClasses||r.map((function(t,e){return"categorical-".concat(e)})),flipped:t.flipped||!1,keys:t.keys,bounds:t.bounds||{width:600,height:400}},lo(t)),{tooltipsEnabled:t.tooltipsEnabled||!0,tooltips:t.tooltips||function(t,e){return"Category: ".concat(e.category,"<br/>Subcategory: ").concat(e.subcategory,"<br/>Value: ").concat(e.value)}})}function Mo(t){var e=t.categories,n=t.categoryScale,r=t.values,i=t.valueScale,a=t.subcategories,o=t.flipped,l=t.styleClasses,u=t.keys,c=t.bounds;o?(n.range([0,c.height]),i.range([0,c.width])):(n.range([0,c.width]),i.range([c.height,0]));for(var s=[],h=0;h<e.length;++h)for(var f=r[h],d=i(0),p=0;p<f.length;++p){var g=e[h],y=a[p],v=f[p],m={x:n(g),y:d-Math.abs(i(0)-i(v)),width:n.bandwidth(),height:Math.abs(i(0)-i(v))},b={x:d,y:n(g),width:Math.abs(i(0)-i(v)),height:n.bandwidth()},w=o?b:m,x=wi({category:g,subcategory:y,value:v,key:(null==u?void 0:u[h][p])||"".concat(g,"/").concat(y),styleClass:_(l)?l[h][p]:k(l)?l[p]:l},w);d=o?w.x+w.width:w.y,s.push(x)}return s}function So(t){t.classed("series-bar",!0).classed("series-bar-stacked",!0).attr("data-ignore-layout-children",!0).on("update.subcategory",(function(t){return t.detail.selection.attr("data-subcategory",(function(t){return t.subcategory}))})).each((function(t,e,n){var r=ve(n[e]),i=r.attr("bounds");i&&(t.bounds=Oi(i),r.selectAll("rect").data(Mo(t),(function(t){return t.key})).call((function(t){return wo(r,t)})))})).on("pointerover.seriesbargroupedhighlight pointerout.seriesbargroupedhighlight",(function(t){return t.target.classList.toggle("highlight",t.type.endsWith("over"))})).call((function(t){return uo(t)}))}function Co(t){return{texts:t.texts||[],positions:t.positions||[],keys:t.keys}}function Eo(t){var e=t.texts,n=t.keys,r=t.positions;return e.map((function(t,e){return wi({text:t,key:(null==n?void 0:n[e])||t},r[e])}))}function zo(t){t.classed("series-label",!0).attr("data-ignore-layout-children",!0),t.each((function(t,e,n){var r=ve(n[e]);r.selectAll("text").data(Eo(t),(function(t){return t.key})).call((function(t){return jo(r,t)}))}))}function jo(t,e){e.join((function(e){return e.append("text").classed("label",!0).each((function(t,e,n){return w(ve(n[e]),t)})).attr("font-size","0em").attr("opacity",0).call((function(t){return t.transition("enter").duration(250).attr("font-size","1em").attr("opacity",1)})).call((function(e){return t.dispatch("enter",{detail:{selection:e}})}))}),void 0,(function(e){return e.classed("exiting",!0).call((function(t){return t.transition("exit").duration(250).attr("font-size","0em").attr("opacity",0).remove()})).call((function(e){return t.dispatch("exit",{detail:{selection:e}})}))})).each((function(t,e,n){return ve(n[e]).transition("position").duration(250).ease(Cr).call((function(e){return w(e,t)}))})).text((function(t){return t.text})).attr("data-key",(function(t){return t.key})).call((function(e){return t.dispatch("update",{detail:{selection:e}})}))}function No(t){return{barContainer:t.barContainer||ve(".chart"),labels:t.labels||function(t){return t.value.toString()},relativePositions:t.relativePositions||{x:.5,y:.5},offsets:t.offsets||3}}function Vo(t){var e=t.barContainer,n=t.labels,r=t.relativePositions,i=t.offsets;return e.selectAll(".bar:not(.exiting)").nodes().map((function(t,e){var a=ve(t),o=a.datum(),l=r instanceof Function?r(o):k(r)?r[e]:r,u="number"==typeof i?{x:(l.x<.5?-1:.5===l.x?0:1)*i,y:(l.y<.5?-1:.5===l.y?0:1)*i}:i instanceof Function?i(o):k(i)?i[e]:i,c=Ci(o,l);return{x:c.x+u.x,y:c.y+u.y,relativePosition:l,offset:u,text:n instanceof Function?n(o):n[e],bar:a,key:o.key}}))}function $o(t){t.classed("series-label",!0).classed("series-label-bar",!0).attr("data-ignore-layout-children",!0).each((function(t,e,n){var r=ve(n[e]);r.on("update.serieslabelbar",(function(t){t.detail.selection.each((function(t,e,n){var r=ve(n[e]),i=t.relativePosition,a=Ma,o=Aa,l=i.x<.5?a.Left:.5===i.x?a.Center:a.Right,u=i.y<.5?o.Top:.5===i.y?o.Center:o.Bottom;Xa(r,l),Wa(r,u)}))})).selectAll("text").data(Vo(t),(function(t){return t.key})).call((function(t){return jo(r,t)}))}))}function Lo(t){var e;return wi(wi(wi({},vo(t)),Ba(t)),{labelsEnabled:null===(e=t.labelsEnabled)||void 0===e||e,labels:t.labels||{}})}function To(t){t.call((function(t){return Ta(t)})).classed("chart-bar",!0).each((function(t,e,n){var r=ve(n[e]),i=r.selectAll(".draw-area"),a=i.selectAll(".series-bar").data([t]).join("g").call((function(t){return bo(t)})).on("pointerover.chartbarhighlight",(function(t){return Po(r,ve(t.target),!0)})).on("pointerout.chartbarhighlight",(function(t){return Po(r,ve(t.target),!1)}));i.selectAll(".series-label-bar").data(t.labelsEnabled?[No(wi({barContainer:a},t.labels))]:[]).join("g").call((function(t){return $o(t)})),t.xAxis.scale=t.categoryScale,t.yAxis.scale=t.valueScale,Da(r)}))}function Po(t,e,n){e.each((function(e){t.selectAll('.label[data-key="'.concat(e.key,'"]')).classed("highlight",n),t.selectAll('.axis-x .tick[data-key="'.concat(e.category,'"]')).classed("highlight",n)}))}function Ro(t){var e=t.labels||[];return{title:t.title||"",labels:e,reverse:t.reverse,styleClasses:t.styleClasses||e.map((function(t,e){return"categorical-".concat(e)})),symbols:t.symbols||function(t,e){return aa(t,qi(e))},keys:t.keys}}function Oo(t){var e=t.labels,n=t.styleClasses,r=t.symbols,i=t.keys,a=t.reverse,o=e.map((function(t,e){return{label:t,styleClass:k(n)?n[e]:n,symbol:k(r)?r[e]:r,key:void 0===i?t:i[e]}}));return a?o.reverse():o}function Fo(t){t.classed("legend",!0).each((function(t,e,n){var r=ve(n[e]);r.selectAll(".title").data([null]).join("text").classed("title",!0).text(t.title),r.selectAll(".items").data([null]).join("g").classed("items",!0).selectAll(".legend-item").data(Oo(t),(function(t){return t.label})).join((function(t){return t.append("g").classed("legend-item",!0).call((function(t){return t.append("path").classed("symbol",!0)})).call((function(t){return t.append("text").classed("label",!0)})).call((function(t){return r.dispatch("enter",{detail:{selection:t}})}))}),void 0,(function(t){return t.remove().call((function(t){return r.dispatch("exit",{detail:{selection:t}})}))})).each((function(t,e,n){var r=ve(n[e]);r.selectAll(".label").text(t.label),r.selectAll(".symbol").call((function(e){var n=e.attr("bounds");n&&t.symbol(e.node(),Oi(n))}))})).attr("data-style",(function(t){return t.styleClass})).attr("data-key",(function(t){return t.key})).call((function(t){return r.dispatch("update",{detail:{selection:t}})}))})),t.on("pointerover.legend pointerout.legend",(function(t){var e=t.target.closest(".legend-item");e&&e.classList.toggle("highlight",t.type.endsWith("over"))}))}function Bo(t){var e,n=Ao(t);return wi(wi(wi({},n),Ba(t)),{styleClasses:t.styleClasses||n.subcategories.map((function(t,e){return"categorical-".concat(e)})),legend:t.legend||{},labelsEnabled:null===(e=t.labelsEnabled)||void 0===e||e,labels:wi({labels:function(t){return t.height>10&&t.width>7?Math.round(t.value).toString():""}},t.labels)})}function Do(t){t.call((function(t){return Ta(t)})).classed("chart-bar-stacked",!0).each((function(t,e,n){var r=t.subcategories,i=t.styleClasses,a=t.xAxis,o=t.yAxis,l=t.categoryScale,u=t.valueScale,c=t.labelsEnabled,s=t.legend,h=t.labels,f=ve(n[e]),d=f.selectAll(".draw-area"),p=d.selectAll(".series-bar-stacked").data([t]).join("g").call((function(t){return So(t)})).on("pointerover.chartbarstackedhighlight pointerout.chartbarstackedhighlight",(function(t){return qo(f,ve(t.target),t.type.endsWith("over"))}));d.selectAll(".series-label-bar").data(c?[No(wi({barContainer:p},h))]:[]).join("g").call((function(t){return $o(t)})),f.selectAll(".legend").data([Ro(wi(wi({labels:r,styleClasses:i},s),{keys:r}))]).join("g").call((function(t){return Fo(t)})).on("pointerover.chartbarstackedhighlight pointerout.chartbarstackedhighlight",(function(t){Wo(f,ve(t.target.closest(".legend-item")),t.type.endsWith("over"))})),a.scale=l,o.scale=u,Da(f),f.selectAll(".axis-x .tick").on("pointerover.chartbarstackedhighlight pointerout.chartbarstackedhighlight",(function(t){return Xo(f,ve(t.currentTarget),t.type.endsWith("over"))}))}))}function qo(t,e,n){e.each((function(e,r,i){t.selectAll('.label[data-key="'.concat(e.key,'"]')).classed("highlight",n),t.selectAll('.axis-x .tick[data-key="'.concat(e.category,'"]')).classed("highlight",n),t.selectAll('.legend-item[data-key="'.concat(e.subcategory,'"]')).classed("highlight",n)}))}function Wo(t,e,n){e.each((function(e,r,i){var a=i[r].getAttribute("data-key");t.selectAll('.bar[data-subcategory="'.concat(a,'"]')).classed("highlight",n).each((function(e){return t.selectAll('.label[data-key="'.concat(e.key,'"]')).classed("highlight",n)}))}))}function Xo(t,e,n){e.classed("highlight",n).each((function(e,r,i){var a=i[r].getAttribute("data-key");t.selectAll('.bar[data-category="'.concat(a,'"]')).classed("highlight",n).each((function(e){return t.selectAll('.label[data-key="'.concat(e.key,'"]')).classed("highlight",n)}))}))}function Io(t){var e,n=xo(t);return wi(wi(wi({},n),Ba(t)),{styleClasses:t.styleClasses||n.subcategories.map((function(t,e){return"categorical-".concat(e)})),legend:t.legend||{},labelsEnabled:null===(e=t.labelsEnabled)||void 0===e||e,labels:t.labels||{}})}function Ho(t){t.call((function(t){return Ta(t)})).classed("chart-bar-grouped",!0).each((function(t,e,n){var r=t.subcategories,i=t.xAxis,a=t.yAxis,o=t.categoryScale,l=t.valueScale,u=t.styleClasses,c=t.labelsEnabled,s=t.labels,h=t.legend;t.values;var f=ve(n[e]),d=f.selectAll(".draw-area"),p=d.selectAll(".series-bar-grouped").data([t]).join("g").call((function(t){return _o(t)})).on("pointerover.chartbargroupedhighlight pointerout.chartbargroupedhighlight",(function(t){return Yo(f,ve(t.target),t.type.endsWith("over"))}));d.selectAll(".series-label-bar").data(c?[No(wi({barContainer:p},s))]:[]).join("g").call((function(t){return $o(t)})),f.selectAll(".legend").data([Ro(wi(wi({labels:r,styleClasses:u},h),{keys:r}))]).join("g").call((function(t){return Fo(t)})).on("pointerover.chartbargroupedhighlight pointerout.chartbargroupedhighlight",(function(t){Uo(f,ve(t.target.closest(".legend-item")),t.type.endsWith("over"))})),i.scale=o,a.scale=l,Da(f),f.selectAll(".axis-x .tick").on("pointerover.chartbargroupedhighlight pointerout.chartbargroupedhighlight",(function(t){return Go(f,ve(t.currentTarget),t.type.endsWith("over"))}))}))}!function(t){t.Vertical="vertical",t.Horizontal="horizontal"}(co||(co={}));var Yo=qo,Uo=Wo,Go=Xo;function Ko(t){var e=Lo(t),n=t.valueDomain||function(t){return[0,1.05*Math.max.apply(Math,ki([],xi(t),!1))]};return e.valueScale.domain(n instanceof Function?n(e.values):n),wi(wi({},e),{categoryEntity:t.categoryEntity||"Categories",valueEntity:t.valueEntity||"Values",categoryActiveStates:t.categoryActiveStates||e.categories.map((function(){return!0})),valueDomain:n})}function Zo(t){t.classed("chart-window-bar",!0).call((function(t){return Ra(t)})).each((function(t,e,n){var r=t.categoryActiveStates,i=t.categories,a=t.categoryScale,o=t.values,l=t.valueScale,u=t.styleClasses,c=t.keys,s=t.valueDomain,h=t.labels.labels,f=ve(n[e]),d=f.selectAll(".menu-tools > .items"),p=f.selectAll(".layouter");d.selectAll(".tool-filter-categories").data([Ja({text:t.categoryEntity,options:t.categories,keys:t.categories})]).join("li").classed("tool-filter-categories",!0).call((function(t){return to(t)})).call((function(t){return t.selectAll(".checkbox input").attr("checked",(function(t,e){return r[e]}))})).on("change.chartwindowbar",(function(t,e){var n=ve(this),r=[];n.selectAll(".checkbox").each((function(t,e,n){return r.push(n[e].querySelector("input").checked)})),f.dispatch("categoryfilter",{detail:{categoryActiveStates:r}})})),d.selectAll(".tool-download-svg").data([null]).join("li").call((function(t){return Ka(t)}));var g=function(t,e){return r[e]},y=i.filter(g),v=o.filter(g),m=k(u)?u.filter(g):u,b=null==c?void 0:c.filter(g),w=k(h)?h.filter(g):h,x=s instanceof Function?s(v):s;a.domain(y),l.domain(x);var _=p.selectAll("svg.chart-bar").data([Lo(wi(wi({},t),{categories:y,values:v,keys:b,styleClasses:m,labels:wi(wi({},t.labels),{labels:w})}))]).join("svg").call((function(t){return To(t)}));p.on("boundschange.chartwindowbar",(function(){return To(_)})).call((function(t){return xa(t)}))}))}function Qo(t){t.on("resize",(function(){ve(this).call((function(t){return Zo(t)}))}))}function Jo(t){return function(e){e.on("categoryfilter",(function(e,n){(t=t||n).categoryActiveStates=e.detail.categoryActiveStates,ve(this).datum(Ko(t)).call((function(t){return Zo(t)}))}))}}function tl(t){var e=Io(t),n=t.valueDomain||function(t){return[0,1.05*Math.max.apply(Math,ki([],xi(t.map((function(t){return Math.max.apply(Math,ki([],xi(t),!1))}))),!1))]};return e.valueScale.domain(n instanceof Function?n(e.values):n),wi(wi({},e),{categoryEntity:t.categoryEntity||"Categories",subcategoryEntity:t.subcategoryEntity||"Subcategories",valueEntity:t.valueEntity||"Values",valueDomain:n,categoryActiveStates:t.categoryActiveStates||e.categories.map((function(){return!0})),subcategoryActiveStates:t.subcategoryActiveStates||e.subcategories.map((function(){return!0}))})}function el(t){t.classed("chart-window-bar-grouped",!0).call((function(t){return Ra(t)})).each((function(t,e,n){var r=t.categories,i=t.categoryScale,a=t.subcategories,o=t.styleClasses,l=t.values,u=t.valueScale,c=t.keys,s=t.valueDomain,h=t.categoryActiveStates,f=t.subcategoryActiveStates,d=t.labels.labels,p=ve(n[e]),g=p.selectAll(".menu-tools > .items"),y=p.selectAll(".layouter");g.selectAll(".tool-filter-categories").data([Ja({text:t.categoryEntity,options:t.categories,keys:t.categories})]).join("li").classed("tool-filter-categories",!0).call((function(t){return to(t)})).call((function(t){return t.selectAll(".checkbox input").attr("checked",(function(t,e){return h[e]}))})).on("change.chartwindowbar",(function(t,e){var n=ve(this),r=[];n.selectAll(".checkbox").each((function(t,e,n){return r.push(n[e].querySelector("input").checked)})),p.dispatch("categoryfilter",{detail:{categoryActiveStates:r}})})),g.selectAll(".tool-filter-subcategories").data([Ja({text:t.subcategoryEntity,options:t.subcategories,keys:t.subcategories})]).join("li").classed("tool-filter-subcategories",!0).call((function(t){return to(t)})).call((function(t){return t.selectAll(".checkbox input").attr("checked",(function(t,e){return f[e]}))})).on("change.chartwindowbar",(function(t,e){var n=ve(this),r=[];n.selectAll(".checkbox").each((function(t,e,n){return r.push(n[e].querySelector("input").checked)})),p.dispatch("subcategoryfilter",{detail:{subcategoryActiveStates:r}})})),g.selectAll(".tool-download-svg").data([null]).join("li").call((function(t){return Ka(t)}));var v=function(t,e){return h[e]},m=function(t,e){return f[e]},b=r.filter(v),w=a.filter(m),x=o.filter(m),_=l.filter(v).map((function(t){return t.filter(m)})),M=null==c?void 0:c.filter(v).map((function(t){return t.filter(m)})),S=k(d)?A(d,a.length).filter(v).map((function(t){return t.filter(m)})).flat():d,C=s instanceof Function?s(_):s;i.domain(b),u.domain(C).nice();var E=y.selectAll("svg.chart-bar-grouped").data([Io(wi(wi({},t),{categories:b,subcategories:w,values:_,keys:M,styleClasses:x,labels:wi(wi({},t.labels),{labels:S})}))]).join("svg").call((function(t){return Ho(t)}));y.on("boundschange.chartwindowbargrouped",(function(){return Ho(E)})).call((function(t){return xa(t)}))}))}function nl(t){t.on("resize",(function(){ve(this).call((function(t){return el(t)}))}))}function rl(t){return function(e){return e.on("categoryfilter",(function(e,n){(t=t||n).categoryActiveStates=e.detail.categoryActiveStates,ve(this).datum(tl(t)).call((function(t){return el(t)}))}))}}function il(t){return function(e){return e.on("subcategoryfilter",(function(e,n){(t=t||n).subcategoryActiveStates=e.detail.subcategoryActiveStates,ve(this).datum(tl(t)).call((function(t){return el(t)}))}))}}function al(t){var e=Bo(t),n=t.valuesAsRatios||!1,r=t.valueDomain||function(t){return n?[0,100]:[0,1.05*Math.max.apply(Math,ki([],xi(t.map((function(t){return t.reduce((function(t,e){return t+e}))}))),!1))]};return e.valueScale.domain(r instanceof Function?r(e.values):r),wi(wi({},e),{categoryEntity:t.categoryEntity||"Categories",subcategoryEntity:t.subcategoryEntity||"Subcategories",valueEntity:t.valueEntity||"Values",valueDomain:r,valuesAsRatios:n,categoryActiveStates:t.categoryActiveStates||e.categories.map((function(){return!0})),subcategoryActiveStates:t.subcategoryActiveStates||e.subcategories.map((function(){return!0}))})}function ol(t){t.classed("chart-window-bar-stacked",!0).call((function(t){return Ra(t)})).each((function(t,e,n){var r=t.categories,i=t.categoryScale,a=t.subcategories,o=t.values,l=t.valueScale,u=t.keys,c=t.styleClasses,s=t.valueDomain,h=t.valuesAsRatios,f=t.categoryActiveStates,d=t.subcategoryActiveStates,p=t.labels.labels,g=ve(n[e]),y=g.selectAll(".menu-tools > .items"),v=g.selectAll(".layouter");y.selectAll(".tool-filter-categories").data([Ja({text:t.categoryEntity,options:t.categories,keys:t.categories})]).join("li").classed("tool-filter-categories",!0).call(to).call((function(t){return t.selectAll(".checkbox input").attr("checked",(function(t,e){return f[e]}))})).on("change.chartwindowbar",(function(t,e){var n=ve(this),r=[];n.selectAll(".checkbox").each((function(t,e,n){return r.push(n[e].querySelector("input").checked)})),g.dispatch("categoryfilter",{detail:{categoryActiveStates:r}})})),y.selectAll(".tool-filter-subcategories").data([Ja({text:t.subcategoryEntity,options:t.subcategories,keys:t.subcategories})]).join("li").classed("tool-filter-subcategories",!0).call(to).call((function(t){return t.selectAll(".checkbox input").attr("checked",(function(t,e){return d[e]}))})).on("change.chartwindowbar",(function(t,e){var n=ve(this),r=[];n.selectAll(".checkbox").each((function(t,e,n){return r.push(n[e].querySelector("input").checked)})),g.dispatch("subcategoryfilter",{detail:{subcategoryActiveStates:r}})})),y.selectAll(".tool-download-svg").data([null]).join("li").call((function(t){return Ka(t)}));var m=function(t,e){return f[e]},b=function(t,e){return d[e]},w=r.filter(m),x=a.filter(b),_=c.filter(b),M=o.filter(m).map((function(t){return t.filter(b)})).map((function(t){if(!h)return t;var e=t.reduce((function(t,e){return t+e}),0);return t.map((function(t){return t/e*100||0}))})),S=null==u?void 0:u.filter(m).map((function(t){return t.filter(b)})),C=k(p)?A(p,a.length).filter(m).map((function(t){return t.filter(b)})).flat():p,E=s instanceof Function?s(M):s;i.domain(w),l.domain(E).nice();var z=v.selectAll("svg.chart-bar-stacked").data([Bo(wi(wi({},t),{categories:w,subcategories:x,values:M,keys:S,styleClasses:_,labels:wi(wi({},t.labels),{labels:C})}))]).join("svg").call((function(t){return Do(t)}));v.on("boundschange.chartwindowbarstacked",(function(){return Do(z)})).call((function(t){return xa(t)}))}))}function ll(t){t.on("resize",(function(){ve(this).call((function(t){return ol(t)}))}))}function ul(t){return function(e){return e.on("categoryfilter",(function(e,n){(t=t||n).categoryActiveStates=e.detail.categoryActiveStates,ve(this).datum(al(t)).call((function(t){return ol(t)}))}))}}function cl(t){return function(e){return e.on("subcategoryfilter",(function(e,n){(t=t||n).subcategoryActiveStates=e.detail.subcategoryActiveStates,ve(this).datum(al(t)).call((function(t){return ol(t)}))}))}}function sl(t){var e=t.xValues||[],n=t.yValues||[],r=t.xScale||Ea(e),i=t.yScale||Ea(e),a=t.keys||n.map((function(t,e){return e.toString()}));return wi(wi({xValues:e,xScale:r,yValues:n,yScale:i,radiuses:t.radiuses||5,color:t.color,styleClasses:t.styleClasses||"categorical-0",keys:a,bounds:t.bounds||{width:600,height:400},flipped:t.flipped||!1},lo(t)),{tooltipsEnabled:t.tooltipsEnabled||!0,tooltips:t.tooltips||function(t,e){return"X-Value: ".concat(e.xValue,"<br/>Y-Value: ").concat(e.yValue)}})}function hl(t){var e=t.xScale,n=t.yScale,r=t.xValues,i=t.yValues,a=t.radiuses;t.bounds;for(var o=t.keys,l=t.styleClasses,u=t.flipped,c=t.color,s=[],h=0;h<r.length;++h){var f=r[h],d=i[h],p="number"==typeof a?a:a.scale(a.radiusDim[h]);s.push({styleClass:k(l)?l[h]:l,key:(null==o?void 0:o[h])||h.toString(),center:{x:u?n(d):e(f),y:u?e(f):n(d)},radius:null!=p?p:5,xValue:f,yValue:d,color:null==c?void 0:c.colorScale(c.colorDim[h])})}return s}function fl(t){t.classed("series-point",!0).attr("data-ignore-layout-children",!0).each((function(t,e,n){var r=ve(n[e]),i=r.attr("bounds");i&&(t.bounds=Oi(i),r.selectAll(".point").data(hl(t),(function(t){return t.key})).call((function(t){return dl(r,t)})))})).on("pointerover.seriespointhighlight pointerout.seriespointhighlight",(function(t){return t.target.classList.toggle("highlight",t.type.endsWith("over"))})).call((function(t){return uo(t)}))}function dl(t,e){e.join((function(e){return e.append("circle").classed("point",!0).each((function(t,e,n){return Qi(ve(n[e]),ta(t))})).call((function(e){return t.dispatch("enter",{detail:{selection:e}})}))}),void 0,(function(e){return e.classed("exiting",!0).call((function(t){return t.transition("exit").duration(250).each((function(t,e,n){return Qi(ve(n[e]),ta(t))})).remove()})).call((function(e){return t.dispatch("exit",{detail:{selection:e}})}))})).call((function(t){return t.transition("update").duration(250).ease(Cr).each((function(t,e,n){return Qi(ve(n[e]),t)}))})).attr("data-style",(function(t){return t.color?null:t.styleClass})).attr("data-key",(function(t){return t.key})).call((function(e){return t.dispatch("update",{detail:{selection:e}})}))}function pl(t){t.call((function(t){return Ta(t)})).classed("chart-point",!0).each((function(e,n,r){!function(t,e){var n=ve(e).selectAll(".draw-area"),r=Oi(n.attr("bounds")||"0, 0, 600, 400"),i=t.flipped,a=t.xScale,o=t.yScale,l=t.maxRadius;a.range(i?[r.height-l,l]:[l,r.width-2*l]),o.range(i?[l,r.width-2*l]:[r.height-l,l])}(e,r[n]),function(t,e){var n=t.flipped,r=t.pointSeries,i=t.xScale,a=t.yScale;ve(e).selectAll(".draw-area").selectAll(".series-point").data(r.map((function(t){return sl({styleClasses:t.styleClasses,keys:t.keys,xValues:t.xValues,yValues:t.yValues,radiuses:t.radiuses,color:t.color,xScale:i,yScale:a,flipped:n})}))).join("svg").call((function(t){return fl(t)}))}(e,r[n]),function(e,n){var r=ve(n).selectAll(".draw-area"),i=e.legend;t.selectAll(".legend").data([i]).join("g").call((function(t){return Fo(t)})).on("pointerover.chartpointhighlight pointerout.chartpointhighlight",(function(t){gl(r,ve(t.target.closest(".legend-item")),t.type.endsWith("over"))}))}(e,r[n]),e.xAxis.scale=e.xScale,e.yAxis.scale=e.yScale})).call((function(t){return Da(t)}))}function gl(t,e,n){e.each((function(e,r,i){var a=i[r].getAttribute("data-key");console.log(a),t.selectAll('.point[data-key^="'.concat(a,'"]')).classed("highlight",n),t.selectAll('.label[data-key^="'.concat(a,'"]')).classed("highlight",n)}))}function yl(t){var e=t.xValues,n=t.yValues,r=t.xScale,i=t.yScale,a=t.legend,o=t.flipped,l=t.radiuses,u=t.zoom,c=t.color,s=e.length<n.length?e.length:n.length,h=e.slice(0,s),f=n.slice(0,s),d=null!=r?r:Ea(e),p=null!=i?i:Ea(n),g=h.map((function(e,n){var r=t.styleClasses?t.styleClasses[n]:"categorical-".concat(n),i="number"==typeof l?l:"object"==typeof l?{scale:l.scale,radiusDim:l.radiusDim[n]}:5;return sl({flipped:o,styleClasses:r,keys:f[n].map((function(t,e){var r,i;return"".concat(null!==(i=null===(r=null==a?void 0:a.keys)||void 0===r?void 0:r[n])&&void 0!==i?i:n,"-").concat(e)})),xValues:h[n],yValues:f[n],radiuses:i,color:c,xScale:d,yScale:p})})),y=g[0],v="number"==typeof y.radiuses?y.radiuses:y.radiuses.scale.range()[1],m=(null==a?void 0:a.labels)?a.labels:f.map((function(t,e){return"categorical-".concat(e)}));return wi(wi({xScale:d,yScale:p,pointSeries:g,maxRadius:v,legend:Ro(a||{labels:m})},Ba(t)),{zoom:u?wi(wi({},u),{behaviour:bi()}):void 0})}function vl(t){var e=yl(t);return wi({},e)}var ml=function(){function t(t,e){this.selection=t,this.addedListeners=!1,this.data=vl(e)}return t.prototype.addCustomListener=function(t,e){this.selection.on(t,e)},t.prototype.buildWindowChart=function(){this.renderWindow(),this.addBuiltInListeners(),this.addedListeners=!0},t.prototype.renderWindow=function(){this.selection.datum(this.data).classed("chart-window-point",!0).call((function(t){return Ra(t)})).each((function(t,e,n){var r=ve(n[e]),i=r.selectAll(".menu-tools > .items"),a=r.selectAll(".layouter");i.selectAll(".tool-download-svg").data([null]).join("li").call((function(t){return Ka(t)}));var o=a.selectAll("svg.chart-point").data([t]).join("svg").call((function(t){return pl(t)}));a.on("boundschange.chartwindowpoint",(function(){return pl(o)})).call((function(t){return xa(t)}))}))},t.prototype.addBuiltInListeners=function(){this.addedListeners||(this.addZoomListeners(),this.addFinalListeners())},t.prototype.addZoomListeners=function(){var t=this,e=this.selection.selectAll(".draw-area");this.selection.each((function(n,r,i){var a=ve(i[r]),o=n.xScale,l=n.yScale,u=n.zoom;u&&(e.call(u.behaviour.scaleExtent([u.out,u.in]).on("zoom.autozoom",(function(e){t.data=wi(wi({},n),{xScale:e.transform.rescaleX(o),yScale:e.transform.rescaleY(l)}),a.dispatch("resize")}))),a.on("resize.autozoom",(function(){var t=xi(o.range(),2),e=t[0],n=t[1],r=xi(l.range(),2),i=r[0],a=[[e,r[1]],[n,i]];u.behaviour.extent(a).translateExtent(a)})))}))},t.prototype.addFinalListeners=function(){var t,e=this;this.selection.on("resize.final",(function(){e.renderWindow()})),null===(t=this.data.zoom)||void 0===t||t.behaviour.on("zoom.final",(function(){e.renderWindow()}))},t}();function bl(t){var e,n,r,i=t.xValues||[],a=t.yValues||[],o=null!==(e=t.xScale)&&void 0!==e?e:"number"==typeof(null==i?void 0:i[0])?oi().domain([Math.min.apply(Math,ki([],xi(i),!1)),Math.max.apply(Math,ki([],xi(i),!1))]).nice():Kr().domain(new Set(i)),l=null!==(n=t.yScale)&&void 0!==n?n:"number"==typeof(null===(r=null==a?void 0:a[0])||void 0===r?void 0:r[0])?oi().domain([Math.min.apply(Math,ki([],xi(a.map((function(t){return Math.min.apply(Math,ki([],xi(t),!1))}))),!1)),Math.max.apply(Math,ki([],xi(a.map((function(t){return Math.max.apply(Math,ki([],xi(t),!1))}))),!1))]).nice():Kr().domain(new Set(a.flat())),u=t.yScales,c=t.styleClasses||a.map((function(t,e){return"categorical-".concat(e)})),s=t.keys||a.map((function(t,e){return e.toString()}));return{xValues:i,yValues:a,xScale:o,yScale:l,yScales:u,styleClasses:c,keys:s,flipped:t.flipped||!1}}function wl(t){t.classed("series-line",!0).attr("data-ignore-layout-children",!0).each((function(t,e,n){var r=ve(n[e]),i=r.attr("bounds");if(i){Oi(i);var a=t.xValues,o=t.yValues,l=t.xScale,u=t.yScale,c=t.yScales,s=t.keys,h=t.styleClasses,f=t.flipped,d=o.map((function(t,e){return{positions:t.map((function(t,e){var n=l(a[e]),r=c?c[e](t):u(t);return{x:f?r:n,y:f?n:r}})),key:s[e],styleClass:k(h)?h[e]:h}}));r.selectAll("path").data(d,(function(t){return t.key})).join((function(t){return t.append("path").classed("line",!0).call((function(t){return r.dispatch("enter",{detail:{selection:t}})}))}),void 0,(function(t){return t.remove().call((function(t){return r.dispatch("exit",{detail:{selection:t}})}))})).each((function(t,e,n){la(n[e],t.positions)})).attr("data-style",(function(t){return t.styleClass})).attr("data-key",(function(t){return t.key})).call((function(t){return r.dispatch("update",{detail:{selection:t}})}))}})).on("pointerover.serieslinehighlight pointerout.serieslinehighlight",(function(t){return t.target.classList.toggle("highlight",t.type.endsWith("over"))}))}function xl(t){var e=bl(t),n=Ba(t);return wi(wi(wi({},e),n),{legend:t.legend||{},markerLabelsEnabled:t.markerLabelsEnabled||!0,markerLabels:t.markerLabels||function(t,e){return"".concat(e.yValue)},markerTooltips:t.markerTooltips||{}})}function kl(t){t.call((function(t){return Ta(t)})).classed("chart-line",!0).each((function(t,e,n){var r=ve(n[e]),i=r.selectAll(".draw-area"),a=Oi(i.attr("bounds")||"0, 0, 600, 400"),o=t.styleClasses,l=t.keys,u=t.xValues,c=t.yValues,s=t.xScale,h=t.yScale,f=t.flipped;s.range(f?[a.height,0]:[0,a.width]),h.range(f?[0,a.width]:[a.height,0]),i.selectAll(".series-line").data([t]).join("g").call((function(t){return wl(t)})).on("pointerover.chartlinehighlight",(function(t){return _l(r,ve(t.target),!0)})).on("pointerout.chartlinehighlight",(function(t){return _l(r,ve(t.target),!1)}));var d=t.markerTooltips,p=i.selectAll(".series-point").data(l.map((function(t,e){return sl(wi({styleClasses:k(o)?o[e]:o,keys:c[e].map((function(e,n){return"".concat(t,"-").concat(n)})),xValues:u,yValues:c[e],xScale:s,yScale:h,flipped:f},d))}))).join("g").call((function(t){return fl(t)})).on("pointerover.chartlinehighlight",(function(t){return Al(r,ve(t.target),!0)})).on("pointerout.chartlinehighlight",(function(t){return Al(r,ve(t.target),!1)})).attr("data-key",(function(t,e){return l[e]})),g=t.markerLabelsEnabled,y=t.markerLabels;i.selectAll(".series-label").data(g?l.map((function(e,n){var r=p.selectAll('.point[data-key^="'.concat(e,'"]')).data();return Co({positions:r.map((function(t){return t.center})),keys:r.map((function(t){return t.key})),texts:r.map((function(e,r){return y(t,{lineIndex:n,markerIndex:r,xValue:e.xValue,yValue:e.yValue})}))})})):[]).join("g").call((function(t){return zo(t)}));var v=t.legend;r.selectAll(".legend").data(k(o)&&o.length>1?[Ro(wi(wi({styleClasses:o,labels:l},v),{keys:l}))]:[]).join("g").call((function(t){return Fo(t)})).on("pointerover.chartlinehighlight pointerout.chartlinehighlight",(function(t){Ml(r,ve(t.target.closest(".legend-item")),t.type.endsWith("over"))})),t.xAxis.scale=t.xScale,t.yAxis.scale=t.yScale,Da(r)}))}function _l(t,e,n){e.each((function(e){t.selectAll('.legend-item[data-key="'.concat(e.key,'"]')).classed("highlight",n),t.selectAll('.point[data-key^="'.concat(e.key,'"]')).classed("highlight",n),t.selectAll('.label[data-key^="'.concat(e.key,'"]')).classed("highlight",n)}))}function Al(t,e,n){e.each((function(e){var r=e.key.replace(/-[0-9]+$/,"");t.selectAll('.legend-item[data-key="'.concat(r,'"]')).classed("highlight",n),t.selectAll('.line[data-key^="'.concat(r,'"]')).classed("highlight",n),t.selectAll('.label[data-key="'.concat(e.key,'"]')).classed("highlight",n)}))}function Ml(t,e,n){e.each((function(e,r,i){var a=i[r].getAttribute("data-key");t.selectAll('.line[data-key="'.concat(a,'"]')).classed("highlight",n),t.selectAll('.point[data-key^="'.concat(a,'"]')).classed("highlight",n),t.selectAll('.label[data-key^="'.concat(a,'"]')).classed("highlight",n)}))}function Sl(t){var e=xl(t);return wi({},e)}function Cl(t){t.call((function(t){return Ra(t)})).classed("chart-window-line",!0).each((function(t,e,n){var r=ve(n[e]),i=r.selectAll(".menu-tools > .items"),a=r.selectAll(".layouter");i.selectAll(".tool-download-svg").data([null]).join("li").call((function(t){return Ka(t)}));var o=a.selectAll("svg.chart-line").data([t]).join("svg").call((function(t){return kl(t)}));a.on("boundschange.chartwindowline",(function(){return kl(o)})).call((function(t){return xa(t)}))}))}function El(t){t.on("resize",(function(){ve(this).call((function(t){return Cl(t)}))}))}function zl(t){t.legend;var e=t.dimensions,n=t.title,r=t.subtitle,i=t.flipped,a=e.map((function(t,e){var n=t.scale,r=t.title,i=t.subtitle,a=t.styleClass,o=t.values,l=t.configureAxes;return{values:t.values,scale:n||Ea(o),styleClass:a||"dimension-".concat(e),axis:za({scale:n,title:r,subtitle:i,configureAxis:null==l?void 0:l[e]})}})),o=Kr().domain(a.map((function(t,e){return e.toString()})));return{dimensions:a,axisScale:o,title:n,subtitle:r,flipped:i}}function jl(t){t.call((function(t){return Ta(t)})).classed("chart-parcoord",!0).each((function(t,e,n){!function(t,e){var n=Nl(t,e),r=n.drawAreaBounds,i=n.titleBounds,a=n.subtitleBounds,o=t.dimensions,l=t.flipped,u=t.axisScale;o.forEach((function(t){return t.scale.range(l?[0,r.width]:[r.height-i.height-a.height,0])})),u.padding(.25).range(l?[r.height,0]:[0,r.width])}(t,n[e]),function(t,e){t.flipped;for(var n=t.dimensions,r=t.axisScale,i=Nl(t,e),a=i.titleBounds,o=i.subtitleBounds,l=n.map((function(t,e){return e.toString()})),u=[],c=n.map((function(t){return t.scale})),s=n[0].values.length,h=function(t){var e=n.map((function(e){return e.values[t]}));u.push(e)},f=0;f<=s;f++)h(f);var d=bl({xValues:l,yValues:u,yScales:c,xScale:r}),p=a.height+o.height;ve(e).selectAll(".draw-area").selectAll(".series-line").data([d]).join("g").call((function(t){return wl(t)})).attr("transform",(function(){return console.log(p),"translate(0, "+p+")"}))}(t,n[e]),function(t,e){t.flipped;var n=t.dimensions,r=t.axisScale;n.forEach((function(t,n){ve(e).selectAll(".draw-area").selectAll(".axis-".concat(n)).data([null]).join("g").data([t.axis]).join("g").attr("transform",(function(){return"translate("+r(n.toString())+")"})).call((function(t){return Va(t)})).classed("axis axis-".concat(n),!0)}))}(t,n[e])}))}function Nl(t,e){var n=ve(e).selectAll(".draw-area"),r=Oi(n.attr("bounds")||"0, 0, 600, 400"),i=n.select(".title"),a=Oi(i.empty()?"0, 0, 0, 0":i.attr("bounds")||"0, 0, 0, 0"),o=n.select(".subtitle");return{drawAreaBounds:r,titleBounds:a,subtitleBounds:Oi(o.empty()?"0, 0, 0, 0":o.attr("bounds")||"0, 0, 0, 0")}}function Vl(t){var e=zl(t);return wi({},e)}var $l=function(){function t(t,e){this.selection=t,this.addedListeners=!1,this.data=Vl(e)}return t.prototype.addCustomListener=function(t,e){},t.prototype.buildWindowChart=function(){this.renderWindow(),this.addFinalListeners(),this.addedListeners=!0},t.prototype.renderWindow=function(){this.selection.datum(this.data).classed("chart-window-parcoord",!0).call((function(t){return Ra(t)})).each((function(t,e,n){var r=ve(n[e]),i=r.selectAll(".menu-tools > .items"),a=r.selectAll(".layouter");i.selectAll(".tool-download-svg").data([null]).join("li").call((function(t){return Ka(t)}));var o=a.selectAll("svg.chart-parcoord").data([t]).join("svg").call((function(t){return jl(t)}));a.on("boundschange.chartwindowparcoords",(function(){return jl(o)})).call((function(t){return xa(t)}))}))},t.prototype.addFinalListeners=function(){if(!this.addedListeners){var t=this;this.selection.on("resize.final",(function(){t.renderWindow()}))}},t}();export{Ma as HorizontalAlignment,co as LegendOrientation,ka as LegendPosition,_a as Orientation,ml as ScatterPlot,Aa as VerticalAlignment,$l as WindowChartParcoordRenderer,x as arrayEquals,k as arrayIs,_ as arrayIs2D,A as arrayPartition,Na as axisBottomRender,za as axisData,ja as axisLeftRender,Va as axisSequenceRender,ca as boundRegex,Ea as calcDefaultScale,Lo as chartBarData,Io as chartBarGroupedData,Go as chartBarGroupedHoverAxisTick,Yo as chartBarGroupedHoverBar,Uo as chartBarGroupedHoverLegendItem,Ho as chartBarGroupedRender,Po as chartBarHoverBar,To as chartBarRender,Bo as chartBarStackedData,Xo as chartBarStackedHoverAxisTick,qo as chartBarStackedHoverBar,Wo as chartBarStackedHoverLegendItem,Do as chartBarStackedRender,Ta as chartBaseRender,Da as chartCartesianAxisRender,Ba as chartCartesianData,Za as chartDownload,qa as chartLegendPosition,xl as chartLineData,Ml as chartLineHoverLegendItem,_l as chartLineHoverLine,Al as chartLineHoverMarker,kl as chartLineRender,jl as chartParcoordRender,yl as chartPointData,gl as chartPointHoverLegendItem,pl as chartPointRender,Jo as chartWindowBarAutoFilterCategories,Qo as chartWindowBarAutoResize,Ko as chartWindowBarData,rl as chartWindowBarGroupedAutoFilterCategories,il as chartWindowBarGroupedAutoFilterSubcategories,nl as chartWindowBarGroupedAutoResize,tl as chartWindowBarGroupedData,el as chartWindowBarGroupedRender,Zo as chartWindowBarRender,ul as chartWindowBarStackedAutoFilterCategories,cl as chartWindowBarStackedAutoFilterSubcategories,ll as chartWindowBarStackedAutoResize,al as chartWindowBarStackedData,ol as chartWindowBarStackedRender,El as chartWindowLineAutoResize,Sl as chartWindowLineData,Cl as chartWindowLineRender,vl as chartWindowPointData,Gi as circleEquals,ea as circleFitStroke,Ji as circleFromAttrs,Zi as circleFromString,ra as circleInsideRect,ta as circleMinimized,ia as circleOutsideRect,na as circlePosition,Ui as circleRound,Qi as circleToAttrs,Ki as circleToString,fa as convertToPx,Xi as elementComputedStyleWithoutDefaults,Ii as elementData,Hi as elementIs,Wi as elementRelativeBounds,Yi as elementSVGPresentationAttrs,sa as findMatchingBoundsIndex,ua as formatWithDecimalZero,da as isSelection,pa as isTransition,xa as layouterCompute,wa as layouterRender,Oo as legendCreateItems,Ro as legendData,Fo as legendRender,ha as matchesBounds,Pa as menuDropdownRender,Fa as menuToolsRender,zl as parcoordData,oa as pathCircle,la as pathLine,aa as pathRect,g as positionEquals,b as positionFromAttrs,v as positionFromString,p as positionRound,m as positionToAttrs,y as positionToString,w as positionToTransformAttr,ji as rectBottom,$i as rectBottomLeft,Li as rectBottomRight,Ei as rectCenter,Ai as rectEquals,Si as rectFitStroke,Di as rectFromAttrs,qi as rectFromSize,Oi as rectFromString,Ni as rectLeft,Mi as rectMinimized,Ci as rectPosition,Vi as rectRight,_i as rectRound,Bi as rectToAttrs,Ri as rectToString,Fi as rectToViewBox,zi as rectTop,Pi as rectTopLeft,Ti as rectTopRight,Ca as resizeEventListener,mo as seriesBarCreateBars,vo as seriesBarData,ko as seriesBarGroupedCreateBars,xo as seriesBarGroupedData,_o as seriesBarGroupedRender,wo as seriesBarJoin,bo as seriesBarRender,Mo as seriesBarStackedCreateBars,Ao as seriesBarStackedData,So as seriesBarStackedRender,Ya as seriesCheckboxCreateCheckboxes,Ha as seriesCheckboxData,Ga as seriesCheckboxJoin,Ua as seriesCheckboxRender,lo as seriesConfigTooltipsData,uo as seriesConfigTooltipsHandleEvents,$o as seriesLabelBar,Vo as seriesLabelBarCreateLabels,No as seriesLabelBarData,Eo as seriesLabelCreateLabels,Co as seriesLabelData,jo as seriesLabelJoin,zo as seriesLabelRender,bl as seriesLineData,wl as seriesLineRender,hl as seriesPointCreatePoints,sl as seriesPointData,dl as seriesPointJoin,fl as seriesPointRender,c as sizeEquals,d as sizeFromAttrs,h as sizeFromString,u as sizeRound,f as sizeToAttrs,s as sizeToString,Xa as textAlignHorizontal,Wa as textAlignVertical,Ia as textOrientation,Ka as toolDownloadSVGRender,Ja as toolFilterNominalData,to as toolFilterNominalRender,Oa as toolbarRender,eo as tooltip,ao as tooltipContent,io as tooltipHide,oo as tooltipPosition,no as tooltipSelectOrCreate,ro as tooltipShow,l as uuid,Ra as windowChartBaseRender,Vl as windowChartParcoordData};
//# sourceMappingURL=respvis.min.js.map
